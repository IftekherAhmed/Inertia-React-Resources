# Laravel, Inertia.js & React Complete Learning Guide

## Table of Contents
1. [Technology Stack](#technology-stack)
2. [Project Purpose](#project-purpose)
3. [Core Concepts](#core-concepts)
4. [Implementation Patterns](#implementation-patterns)
   - [Migration](#1-migration)
   - [Factory](#2-factory)
   - [Seeder](#3-seeder)
   - [Model](#4-model)
   - [Model Traits](#5-model-traits)
   - [Controller](#6-controller)
   - [Request](#7-request)
   - [Service](#8-service)
   - [TSX Pages](#9-tsx-index-create-edit)
   - [Server-side Features](#10-tsx-accessories-from-server-side)
   - [Table Export](#11-table-export)
   - [Custom Layout](#12-custom-layout-for-frontend)
5. [Additional Requirements Implementation](#additional-requirements-implementation)
   - [Searchable Selectbox](#1-searchable-selectbox)
   - [Dependable Dropdown](#2-dependable-dropdown)
   - [Add/Remove Row](#3-add-or-remove-rowfield)
   - [Price Calculation](#4-product-rows-price-calculation-quantity-wise)
   - [Toggle Component](#5-toggle)
   - [Control Structures](#6-simple-definition-and-example-of-loop-if-else-switch-case)
   - [Table Export Guide](#7-table-export-guide-with-example)
   - [Custom Auth Layout](#8-custom-layout-for-login-and-register-frontend)
6. [CRUD Implementation Guide](#crud-implementation-guide)
7. [Adding Server-side Features](#adding-server-side-features)
   - [Search](#to-add-search-in-the-server-side)
   - [Pagination](#to-add-pagination-in-the-server-side)
   - [Sorting](#to-add-sort-in-the-server-side)
   - [Reset](#to-add-reset-in-the-server-side)
8. [Step-by-Step CRUD Implementation with Post Model](#step-by-step-crud-implementation-with-post-model)
   - [Plain Index Table](#plain-index-table)
   - [Adding Search](#adding-search)
   - [Adding Sort](#adding-sort)
   - [Adding Filter](#adding-filter)
   - [Adding Pagination](#adding-pagination)
   - [Adding Reset](#adding-reset)

## Technology Stack

1. **Laravel 12** - PHP framework for backend development
2. **Inertia.js 2** - Bridge between Laravel and React
3. **React 19** - Frontend library for building user interfaces
4. **Tailwind CSS** - Utility-first CSS framework
5. **ShadCN UI** - Reusable component library built on Radix UI

## Project Purpose

This project serves as a learning platform for:
- Laravel, Inertia.js, and React.js development
- Reducing time to build future projects
- Implementing best practices and clean code architecture

## Core Concepts

The project follows a structured approach separating concerns:
- **Backend**: Laravel handles business logic, database operations, and API endpoints
- **Frontend**: React components with Inertia.js for seamless SPA experience
- **Architecture**: MVC pattern with service layer for business logic

## Implementation Patterns

### 1. Migration

Migrations define the database schema. They are located in [database/migrations](file:///c%3A/xampp/htdocs/leads_management/database/migrations).

Example: [0005_client.php](file:///c%3A/xampp/htdocs/leads_management/database/migrations/0005_client.php)
```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('client', function (Blueprint $table) {
            $table->id();
            $table->foreignId('company_id')
                ->constrained('company')
                ->nullable()
                ->onDelete('cascade');

            $table->string('name')->nullable();
            $table->string('profession')->nullable();
            // ... other fields
            
            $table->timestamps();
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('client');
    }
};
```

### 2. Factory

Factories generate test data for models. Located in [database/factories](file:///c%3A/xampp/htdocs/leads_management/database/factories).

Example: [ClientFactory.php](file:///c%3A/xampp/htdocs/leads_management/database/factories/ClientFactory.php)
```php
<?php

namespace Database\Factories;

use App\Models\Company;
use Illuminate\Database\Eloquent\Factories\Factory;

class ClientFactory extends Factory
{
    public function definition(): array
    {
        $companyId = Company::inRandomOrder()->first()?->id ?? Company::factory()->create()->id;

        return [
            'company_id'    => $companyId,
            'name'          => fake()->name(),
            'profession'    => fake()->jobTitle(),
            'email'         => fake()->unique()->safeEmail(),
            // ... other fields
        ];
    }
}
```

### 3. Seeder

Seeders populate the database with initial data. Located in [database/seeders](file:///c%3A/xampp/htdocs/leads_management/database/seeders).

Example: [ClientSeeder.php](file:///c%3A/xampp/htdocs/leads_management/database/seeders/ClientSeeder.php)
```php
<?php

namespace Database\Seeders;

use App\Models\Company as ModelsCompany;
use Database\Factories\ClientFactory;
use Illuminate\Database\Seeder;

class ClientSeeder extends Seeder
{
    public function run(): void
    {
        if (ModelsCompany::count() === 0) {
            $this->call(CompanySeeder::class);
        }

        $companyIds = ModelsCompany::pluck('id')->toArray();

        ClientFactory::new()
            ->count(50)
            ->sequence(fn ($sequence) => ['company_id' => $companyIds[array_rand($companyIds)]])
            ->create();
    }
}
```

### 4. Model

Models represent database tables and business logic. Located in [app/Models](file:///c%3A/xampp/htdocs/leads_management/app/Models).

Example: [Client.php](file:///c%3A/xampp/htdocs/leads_management/app/Models/Client.php)
```php
<?php

namespace App\Models;

use App\Models\Traits\Relationships\ClientRelations;
use App\Models\Traits\Scopes\ClientScopes;
use Illuminate\Database\Eloquent\Model;

class Client extends Model
{
    use ClientRelations, ClientScopes;

    protected $table = 'client';

    protected $fillable = [
        'company_id',
        'name',
        'profession',
        // ... other fields
    ];

    protected $casts = [
        'id'         => 'integer',
        'age'        => 'integer',
        'company_id' => 'integer',
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
    ];
}
```

### 5. Model Traits

Traits organize model functionality into reusable components.

#### Relationship Traits
Located in [app/Models/Traits/Relationships](file:///c%3A/xampp/htdocs/leads_management/app/Models/Traits/Relationships).

Example: [ClientRelations.php](file:///c%3A/xampp/htdocs/leads_management/app/Models/Traits/Relationships/ClientRelations.php)
```php
<?php

namespace App\Models\Traits\Relationships;

use App\Models\Company;
use App\Models\Activity;
use Illuminate\Database\Eloquent\Relations\BelongsTo;
use Illuminate\Database\Eloquent\Relations\HasMany;

trait ClientRelations
{
    public function company(): BelongsTo
    {
        return $this->belongsTo(Company::class, 'company_id');
    }

    public function activities(): HasMany
    {
        return $this->hasMany(Activity::class, 'client_id');
    }
}
```

#### Scope Traits
Located in [app/Models/Traits/Scopes](file:///c%3A/xampp/htdocs/leads_management/app/Models/Traits/Scopes).

Example: [ClientScopes.php](file:///c%3A/xampp/htdocs/leads_management/app/Models/Traits/Scopes/ClientScopes.php)
```php
<?php

namespace App\Models\Traits\Scopes;

use Illuminate\Contracts\Pagination\LengthAwarePaginator;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Collection;

trait ClientScopes
{
    public function scopeSearch(Builder $query, ?string $search): Builder
    {
        if (empty($search)) {
            return $query;
        }

        return $query->where(function (Builder $q) use ($search): void {
            $q->where('id', 'like', "%{$search}%")
                ->orWhere('name', 'like', "%{$search}%")
                // ... other search fields
        });
    }

    public function scopeByCompany(Builder $query, int|string|null $companyId): Builder
    {
        if (empty($companyId) || $companyId === 'all' || $companyId == 0) {
            return $query;
        }

        return $query->where('company_id', $companyId);
    }

    public function scopeSortBy(Builder $query, string $sortBy, string $sortDirection = 'desc'): Builder
    {
        if ($sortBy === 'company') {
            return $query->leftJoin('company', 'client.company_id', '=', 'company.id')
                ->orderBy('company.name', $sortDirection)
                ->select('client.*');
        }

        if ($sortBy === 'activity_count') {
            return $query->orderBy('activities_count', $sortDirection);
        }

        return $query->orderBy($sortBy, $sortDirection);
    }

    public function scopeFilteredAndSorted(Builder $query, array $filters): Builder
    {
        return $query->withFullData()
            ->search($filters['search'] ?? null)
            ->byCompany($filters['company_id'] ?? null)
            ->sortBy($filters['sort_by'] ?? 'id', $filters['sort_direction'] ?? 'desc');
    }

    public function scopePaginateOrAll(Builder $query, int|string $perPage = 25, int $page = 1): Collection|Builder|LengthAwarePaginator
    {
        if ($perPage === 'all' || $perPage === 0) {
            return $query->get();
        }

        return $query->paginate($perPage, ['*'], 'page', $page);
    }
}
```

### 6. Controller

Controllers handle HTTP requests and responses. Located in [app/Http/Controllers](file:///c%3A/xampp/htdocs/leads_management/app/Http/Controllers).

Example: [ClientController.php](file:///c%3A/xampp/htdocs/leads_management/app/Http/Controllers/ClientController.php)
```php
<?php

namespace App\Http\Controllers;

use App\Http\Requests\ClientRequest;
use App\Services\ClientService;
use App\Models\Client as ModelsClient;
use Illuminate\Http\Request;
use Inertia\Inertia;

class ClientController extends Controller
{
    protected $clientService;

    public function __construct(ClientService $clientService)
    {
        $this->clientService = $clientService;
    }

    public function index(Request $request)
    {
        $data = $this->clientService->getClientList($request);
        return Inertia::render('Client/Index', $data);
    }

    public function create()
    {
        $data = $this->clientService->getCreateData();
        return Inertia::render('Client/Create', $data);
    }

    public function store(ClientRequest $request)
    {
        $result = $this->clientService->storeClient($request);
        
        if ($result['success']) {
            return redirect($result['redirect'])->with('success', $result['message']);
        } else {
            return back()->with('error', $result['message']);
        }
        }
    }

    public function edit(ModelsClient $client)
    {
        $data = $this->clientService->getEditData($client);
        return Inertia::render('Client/Edit', $data);
    }

    public function update(ClientRequest $request, ModelsClient $client)
    {
        $result = $this->clientService->updateClient($request, $client);
        
        if ($result['success']) {
            return redirect($result['redirect'])->with('success', $result['message']);
        } else {
            return back()->with('error', $result['message']);
        }
    }

    public function destroy(ModelsClient $client)
    {
        $result = $this->clientService->deleteClient($client);
        
        if ($result['success']) {
            return redirect($result['redirect'])->with('success', $result['message']);
        } else {
            return back()->with('error', $result['message']);
        }
    }
}
```

### 7. Request

Request classes handle form validation. Located in [app/Http/Requests](file:///c%3A/xampp/htdocs/leads_management/app/Http/Requests).

Example: [ClientRequest.php](file:///c%3A/xampp/htdocs/leads_management/app/Http/Requests/ClientRequest.php)
```php
<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class ClientRequest extends FormRequest
{
    public function authorize(): bool
    {
        return true;
    }

    public function rules(): array
    {
        $rules = [
            'company_id'     => 'required|integer|exists:company,id',
            'name'           => 'required|string|max:255',
            'profession'     => 'nullable|string|max:255',
            'email'          => 'nullable|email|max:255',
            'phone'          => 'required|string|max:255',
            // ... other rules
        ];

        // Adjust rules for different HTTP methods
        if ($this->isMethod('put') || $this->isMethod('patch')) {
            $clientId = $this->route('client');
            if ($clientId) {
                $rules['email'] = 'nullable|email|max:255|unique:client,email,' . $clientId;
            }
        }

        return $rules;
    }

    public function messages(): array
    {
        return [
            'company_id.required' => 'A company is required',
            'name.required'       => 'A name is required',
            'email.email'         => 'Please provide a valid email address',
            'phone.required'      => 'A phone number is required',
        ];
    }

    public function attributes(): array
    {
        return [
            'company_id' => 'company',
            'name'       => 'full name',
            'email'      => 'email address',
            'phone'      => 'phone number',
        ];
    }
}
```

### 8. Service

Services contain business logic and keep controllers thin. Located in [app/Services](file:///c%3A/xampp/htdocs/leads_management/app/Services).

Example: [ClientService.php](file:///c%3A/xampp/htdocs/leads_management/app/Services/ClientService.php)
```php
<?php

namespace App\Services;

use App\Models\Client as ModelsClient;
use App\Models\Company;
use Illuminate\Http\Request;

class ClientService
{
    public function getClientList(Request $request)
    {
        $filters = [
            'search'         => $request->input('search'),
            'company_id'     => $request->input('company_id'),
            'per_page'       => $request->input('per_page', 25),
            'sort_by'        => $request->input('sort_by', 'id'),
            'sort_direction' => $request->input('sort_direction', 'desc'),
        ];

        $page    = $request->input('page', 1);
        $perPage = $filters['per_page'];

        // Use model scopes for cleaner query building
        $query = ModelsClient::filteredAndSorted($filters);
        $results = $query->paginateOrAll($perPage, $page);

        // Handle pagination response format
        if ($perPage === 'all' || $perPage == 0) {
            $pagination = [
                'current_page' => 1,
                'last_page'    => 1,
                'per_page'     => 'all',
                'total'        => $results->count(),
            ];
            $clientList = $results;
        } else {
            $pagination = [
                'current_page' => $results->currentPage(),
                'last_page'    => $results->lastPage(),
                'per_page'     => $results->perPage(),
                'total'        => $results->total(),
            ];
            $clientList = $results->items();
        }

        return [
            'company_list' => Company::orderBy('name', 'asc')->get(),
            'client_list'  => $clientList,
            'pagination'   => $pagination,
            'filters'      => $filters,
        ];
    }

    public function storeClient(Request $request)
    {
        try {
            $data = new ModelsClient();
            $this->fillRequestData($request, $data);
            $data->save();

            return [
                'success'  => true,
                'message'  => 'Client created successfully!',
                'redirect' => route('client.index')
            ];
        } catch (Exception $exception) {
            return [
                'success' => false,
                'message' => 'An error occurred: ' . $exception->getMessage()
            ];
        }
    }

    private function fillRequestData(Request $request, ModelsClient $data): void
    {
        $data->company_id    = $request->input('company_id');
        $data->name          = $request->input('name');
        $data->profession    = $request->input('profession');
        $data->email         = $request->input('email');
        // ... other fields
    }
}
```

### 9. TSX [Index, Create, Edit]

React components for frontend pages. Located in [resources/js/pages](file:///c%3A/xampp/htdocs/leads_management/resources/js/pages).

Example: [Client/Index.tsx](file:///c%3A/xampp/htdocs/leads_management/resources/js/pages/Client/Index.tsx) (partial)
```tsx
import { Card, CardContent, CardFooter } from '@/components/ui/card';
import { Select, SelectTrigger, SelectValue, SelectContent, SelectItem } from '@/components/ui/select';
import AppLayout from '@/layouts/app-layout';
import { type BreadcrumbItem, type Company, type Client, type ClientPageProps } from '@/types';
import { Head, Link, router, usePage } from '@inertiajs/react';
import { Building2, Download, Eye, ListFilter, Pencil, RotateCcw, Search, Trash2, ArrowUp, ArrowDown } from 'lucide-react';
import { useCallback, useRef, useState } from 'react';
import { useDownloadExcel } from 'react-export-table-to-excel';
import Pagination from '@/components/custom_components/Pagination';
import ClientModalView from '@/components/custom_components/modal_view/ClientModalView';
import { Input } from '@/components/ui/input';
import LinkButton from '@/components/LinkButton';
import { Button } from '@/components/ui/button';
import ImportClient from '@/components/custom_components/modal_import/ImportClient';

export default function Index() {
    const { props } = usePage();
    const { company_list, client_list, pagination, filters } = props as unknown as ClientPageProps;
    
    // Local state for filters and UI interactions
    const [searchQuery, setSearchQuery] = useState(filters.search || '');
    const [filterCompany, setFilterCompany] = useState(filters.company_id || 'all');
    const [sortBy, setSortBy] = useState(filters.sort_by || 'id');
    const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>(filters.sort_direction || 'desc');
    const [perPage, setPerPage] = useState<number | 'all'>(filters.per_page || 10);
    const [currentPage, setCurrentPage] = useState(pagination.current_page || 1);
    const [isModalOpen, setIsModalOpen] = useState(false); 
    const [selectedClient, setSelectedClient] = useState<Client | null>(null); 
    
    // Fetch clients with given filters via Inertia
    const fetchClients = useCallback((params: Partial<ClientPageProps['filters'] & { page: number }>) => {
        const query = {
            search: params.search ?? searchQuery,
            company_id: params.company_id ?? filterCompany,
            per_page: params.per_page ?? perPage,
            page: params.page ?? currentPage,
            sort_by: params.sort_by ?? sortBy,
            sort_direction: params.sort_direction ?? sortDirection,
        };

        router.get('/client', query, {
            preserveState: true,
            replace: true,
        });
    }, [searchQuery, filterCompany, perPage, currentPage, sortBy, sortDirection]);

    // Handle typing in search box
    const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {
        setSearchQuery(e.target.value);
        fetchClients({ search: e.target.value, page: 1 });
    };
    
    // Handle Company Change
    const handleCompanyChanged = (value: string) => {
        if (value === 'all') {
            setFilterCompany('all');
            fetchClients({ company_id: null, page: 1 });
        } else {
            const companyId = Number(value);
            setFilterCompany(companyId);
            fetchClients({ company_id: companyId, page: 1 });
        }
    };

    // Handle column sort
    const handleSort = (column: string) => {
        const newDirection = sortBy === column && sortDirection === 'asc' ? 'desc' : 'asc';
        setSortBy(column);
        setSortDirection(newDirection);
        fetchClients({ sort_by: column, sort_direction: newDirection, page: 1 });
    };

    // Reset all filters to default
    const resetTable = () => {
        setSearchQuery('');
        setFilterCompany('all');
        setPerPage(25);
        setCurrentPage(1);
        setSortBy('id');
        setSortDirection('desc');
        fetchClients({ search: '', company_id: null, per_page: 25, page: 1, sort_by: 'id', sort_direction: 'desc' });
    };

    // Open the modal and set the selected client
    const openModal = (client: Client) => {
        setSelectedClient(client);
        setIsModalOpen(true);
    };

    // Close the modal
    const closeModal = () => {
        setSelectedClient(null);
        setIsModalOpen(false);
    };

    // Delete Handle 
    const handleDelete = (e: any) => {
        if (!confirm('Are you sure you want to delete this client?')) {
            e.preventDefault();
        }
    }

    // Excel download logic
    const tableRef = useRef(null);
    const { onDownload } = useDownloadExcel({
        currentTableRef: tableRef.current,
        filename: 'Clients table',
        sheet: 'Clients',
    });

    return (
        <AppLayout breadcrumbs={breadcrumbs}>
            <Head title="Clients" />

            <div className="flex h-full flex-1 flex-col gap-4 rounded-xl p-4">
                <div className="flex items-center justify-between">
                    <h1 className="text-2xl font-bold">Clients</h1>
                    <div className="space-x-2">
                        <LinkButton href="/client/create">+ New Client</LinkButton>
                    </div>
                </div>                

                {/* Rest of component... */}
            </div>
        </AppLayout>
    );
}
```

### 10. TSX Accessories from Server Side

Server-side features implemented in the frontend:

#### Search Implementation
```tsx
// Handle typing in search box
const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setSearchQuery(e.target.value);
    fetchClients({ search: e.target.value, page: 1 });
};

// Backend service method
public function scopeSearch(Builder $query, ?string $search): Builder
{
    if (empty($search)) {
        return $query;
    }

    return $query->where(function (Builder $q) use ($search): void {
        $q->where('id', 'like', "%{$search}%")
            ->orWhere('name', 'like', "%{$search}%")
            ->orWhere('profession', 'like', "%{$search}%")
            // ... other searchable fields
    });
}
```

#### Pagination Implementation
```tsx
// Handle pagination click
const handlePageChange = (page: number) => {
    setCurrentPage(page);
    fetchClients({ page });
};

// Backend service method
public function scopePaginateOrAll(Builder $query, int|string $perPage = 25, int $page = 1): Collection|Builder|LengthAwarePaginator
{
    if ($perPage === 'all' || $perPage === 0) {
        return $query->get();
    }

    return $query->paginate($perPage, ['*'], 'page', $page);
}
```

#### Sorting Implementation
```tsx
// Handle column sort
const handleSort = (column: string) => {
    const newDirection = sortBy === column && sortDirection === 'asc' ? 'desc' : 'asc';
    setSortBy(column);
    setSortDirection(newDirection);
    fetchClients({ sort_by: column, sort_direction: newDirection, page: 1 });
};

// Backend service method
public function scopeSortBy(Builder $query, string $sortBy, string $sortDirection = 'desc'): Builder
{
    if ($sortBy === 'company') {
        return $query->leftJoin('company', 'client.company_id', '=', 'company.id')
            ->orderBy('company.name', $sortDirection)
            ->select('client.*');
    }

    if ($sortBy === 'activity_count') {
        return $query->orderBy('activities_count', $sortDirection);
    }

    return $query->orderBy($sortBy, $sortDirection);
}
```

#### Reset Implementation
```tsx
// Reset all filters to default
const resetTable = () => {
    setSearchQuery('');
    setFilterCompany('all');
    setPerPage(25);
    setCurrentPage(1);
    setSortBy('id');
    setSortDirection('desc');
    fetchClients({ search: '', company_id: null, per_page: 25, page: 1, sort_by: 'id', sort_direction: 'desc' });
};
```

### 11. Table Export

Export functionality using `react-export-table-to-excel`:

```tsx
import { useDownloadExcel } from 'react-export-table-to-excel';

// Excel download logic
const tableRef = useRef(null);
const { onDownload } = useDownloadExcel({
    currentTableRef: tableRef.current,
    filename: 'Clients table',
    sheet: 'Clients',
});

// In render:
<Button onClick={onDownload}>Export to Excel</Button>

<table className="text-sm min-w-full table-auto" ref={tableRef}>
    {/* Table content */}
</table>
```

### 12. Custom Layout For Frontend

Layout components organize the page structure. Located in [resources/js/layouts](file:///c%3A/xampp/htdocs/leads_management/resources/js/layouts).

Example: [app-layout.tsx](file:///c%3A/xampp/htdocs/leads_management/resources/js/layouts/app-layout.tsx)
```tsx
import AppContent from '@/components/app-content';
import AppHeader from '@/components/app-header';
import AppShell from '@/components/app-shell';
import AppSidebar from '@/components/app-sidebar';
import { type BreadcrumbItem } from '@/types';
import { Head } from '@inertiajs/react';
import { type ReactNode } from 'react';

interface AppLayoutProps {
    title?: string;
    breadcrumbs?: BreadcrumbItem[];
    children: ReactNode;
}

export default function AppLayout({ title, breadcrumbs, children }: AppLayoutProps) {
    return (
        <AppShell
            header={<AppHeader />}
            sidebar={<AppSidebar />}
            content={
                <>
                    {title && <Head title={title} />}
                    <AppContent breadcrumbs={breadcrumbs}>{children}</AppContent>
                </>
            }
        />
    );
}
```

## Additional Requirements Implementation

### 1. Searchable Selectbox

Using ShadCN UI Select component with search functionality:

```tsx
<Select>
    <SelectTrigger>
        <SelectValue placeholder="Select a company" />
    </SelectTrigger>
    <SelectContent>
        <SelectItem value="all">All Companies</SelectItem>
        {companies.map((company) => (
            <SelectItem key={company.id} value={company.id.toString()}>
                {company.name}
            </SelectItem>
        ))}
    </SelectContent>
</Select>
```

For enhanced searchable selectboxes, implement a custom component:

```tsx
import { useState, useMemo } from 'react';
import { Input } from '@/components/ui/input';
import { ScrollArea } from '@/components/ui/scroll-area';

interface SearchableSelectProps {
    options: { value: string; label: string }[];
    value: string;
    onValueChange: (value: string) => void;
    placeholder?: string;
}

export function SearchableSelect({ options, value, onValueChange, placeholder }: SearchableSelectProps) {
    const [searchTerm, setSearchTerm] = useState('');
    
    const filteredOptions = useMemo(() => {
        return options.filter(option => 
            option.label.toLowerCase().includes(searchTerm.toLowerCase())
        );
    }, [options, searchTerm]);

    return (
        <div className="relative">
            <Input
                placeholder={placeholder || "Search..."}
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="mb-2"
            />
            <ScrollArea className="h-40">
                {filteredOptions.map(option => (
                    <div
                        key={option.value}
                        className={`p-2 cursor-pointer hover:bg-gray-100 ${
                            value === option.value ? 'bg-blue-100' : ''
                        }`}
                        onClick={() => {
                            onValueChange(option.value);
                            setSearchTerm('');
                        }}
                    >
                        {option.label}
                    </div>
                ))}
            </ScrollArea>
        </div>
    );
}
```

### 2. Dependable Dropdown

Creating dependent dropdowns using state management:

```tsx
// Parent dropdown change handler
const handleParentChange = (parentId: string) => {
    setSelectedParent(parentId);
    // Filter child options based on parent selection
    const filteredChildren = allChildren.filter(child => 
        child.parentId === parentId
    );
    setChildOptions(filteredChildren);
    setSelectedChild(''); // Reset child selection
};

// In render:
<Select onValueChange={handleParentChange} value={selectedParent}>
    <SelectTrigger>
        <SelectValue placeholder="Select parent" />
    </SelectTrigger>
    <SelectContent>
        {parentOptions.map(option => (
            <SelectItem key={option.value} value={option.value}>
                {option.label}
            </SelectItem>
        ))}
    </SelectContent>
</Select>

<Select 
    onValueChange={setSelectedChild} 
    value={selectedChild}
    disabled={!selectedParent}
>
    <SelectTrigger>
        <SelectValue placeholder="Select child" />
    </SelectTrigger>
    <SelectContent>
        {childOptions.map(option => (
            <SelectItem key={option.value} value={option.value}>
                {option.label}
            </SelectItem>
        ))}
    </SelectContent>
</Select>
```

### 3. Add or Remove Row/Field

Dynamic form fields implementation:

```tsx
import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { X } from 'lucide-react';

interface DynamicRow {
    id: string;
    field1: string;
    field2: string;
}

export function DynamicFormRows() {
    const [rows, setRows] = useState<DynamicRow[]>([
        { id: Date.now().toString(), field1: '', field2: '' }
    ]);

    const addRow = () => {
        setRows([...rows, { id: Date.now().toString(), field1: '', field2: '' }]);
    };

    const removeRow = (id: string) => {
        if (rows.length > 1) {
            setRows(rows.filter(row => row.id !== id));
        }
    };

    const updateRow = (id: string, field: keyof DynamicRow, value: string) => {
        setRows(rows.map(row => 
            row.id === id ? { ...row, [field]: value } : row
        ));
    };

    return (
        <div>
            {rows.map((row) => (
                <div key={row.id} className="flex gap-2 mb-2">
                    <Input
                        value={row.field1}
                        onChange={(e) => updateRow(row.id, 'field1', e.target.value)}
                        placeholder="Field 1"
                    />
                    <Input
                        value={row.field2}
                        onChange={(e) => updateRow(row.id, 'field2', e.target.value)}
                        placeholder="Field 2"
                    />
                    <Button 
                        type="button" 
                        variant="outline" 
                        size="icon"
                        onClick={() => removeRow(row.id)}
                    >
                        <X className="h-4 w-4" />
                    </Button>
                </div>
            ))}
            <Button type="button" onClick={addRow}>Add Row</Button>
        </div>
    );
}
```

### 4. Product Rows Price Calculation Quantity Wise

Implementing dynamic pricing calculations:

```tsx
import { useState, useEffect } from 'react';
import { Input } from '@/components/ui/input';

interface ProductRow {
    id: string;
    name: string;
    price: number;
    quantity: number;
    total: number;
}

export function ProductPriceCalculator() {
    const [rows, setRows] = useState<ProductRow[]>([
        { id: '1', name: 'Product 1', price: 10, quantity: 1, total: 10 }
    ]);
    const [grandTotal, setGrandTotal] = useState(0);

    // Calculate totals when rows change
    useEffect(() => {
        const total = rows.reduce((sum, row) => sum + row.total, 0);
        setGrandTotal(total);
    }, [rows]);

    const updateRow = (id: string, field: keyof ProductRow, value: string | number) => {
        setRows(rows.map(row => {
            if (row.id === id) {
                const updatedRow = { ...row };
                
                if (field === 'price' || field === 'quantity') {
                    updatedRow[field] = Number(value);
                    updatedRow.total = updatedRow.price * updatedRow.quantity;
                } else {
                    updatedRow[field] = value as string;
                }
                
                return updatedRow;
            }
            return row;
        }));
    };

    return (
        <div>
            {rows.map((row) => (
                <div key={row.id} className="grid grid-cols-4 gap-2 mb-2">
                    <Input
                        value={row.name}
                        onChange={(e) => updateRow(row.id, 'name', e.target.value)}
                        placeholder="Product name"
                    />
                    <Input
                        type="number"
                        value={row.price}
                        onChange={(e) => updateRow(row.id, 'price', e.target.value)}
                        placeholder="Price"
                    />
                    <Input
                        type="number"
                        value={row.quantity}
                        onChange={(e) => updateRow(row.id, 'quantity', e.target.value)}
                        placeholder="Quantity"
                    />
                    <Input
                        type="number"
                        value={row.total}
                        readOnly
                        placeholder="Total"
                    />
                </div>
            ))}
            <div className="font-bold">Grand Total: ${grandTotal.toFixed(2)}</div>
        </div>
    );
}
```

### 5. Toggle

Using ShadCN UI Toggle component:

```tsx
import { Toggle } from '@/components/ui/toggle';
import { Bold } from 'lucide-react';

export function ToggleExample() {
    return (
        <Toggle aria-label="Toggle bold">
            <Bold className="h-4 w-4" />
        </Toggle>
    );
}
```

Custom toggle implementation:

```tsx
import { useState } from 'react';
import { Switch } from '@/components/ui/switch';

export function CustomToggle() {
    const [isEnabled, setIsEnabled] = useState(false);

    return (
        <div className="flex items-center space-x-2">
            <Switch
                checked={isEnabled}
                onCheckedChange={setIsEnabled}
            />
            <span>{isEnabled ? 'Enabled' : 'Disabled'}</span>
        </div>
    );
}
```

### 6. Simple Definition and Example of Loop, If Else, Switch Case

#### Loop Examples

```tsx
// Map function for arrays
const items = ['Apple', 'Banana', 'Cherry'];
const listItems = items.map((item, index) => (
    <li key={index}>{item}</li>
));

// For loop equivalent
const numbers = [];
for (let i = 1; i <= 5; i++) {
    numbers.push(<div key={i}>Number {i}</div>);
}

// While loop equivalent using recursion
function renderItems(count: number) {
    if (count <= 0) return null;
    return (
        <div>
            <div>Item {count}</div>
            {renderItems(count - 1)}
        </div>
    );
}
```

#### If Else Examples

```tsx
// Conditional rendering with ternary operator
const showMessage = true;
const message = showMessage ? <div>Hello World</div> : <div>No message</div>;

// Conditional rendering with logical AND
const user = { name: 'John', isAdmin: true };
const adminPanel = user.isAdmin && <div>Admin Panel</div>;

// If-else with function
function StatusMessage({ isLoggedIn }: { isLoggedIn: boolean }) {
    if (isLoggedIn) {
        return <div>Welcome back!</div>;
    } else {
        return <div>Please log in</div>;
    }
}
```

#### Switch Case Examples

```tsx
// Using switch statement in a function
function getStatusMessage(status: string) {
    switch (status) {
        case 'pending':
            return 'Your order is being processed';
        case 'shipped':
            return 'Your order has been shipped';
        case 'delivered':
            return 'Your order has been delivered';
        default:
            return 'Unknown status';
    }
}

// Using object mapping as alternative to switch
const statusMessages: Record<string, string> = {
    pending: 'Your order is being processed',
    shipped: 'Your order has been shipped',
    delivered: 'Your order has been delivered'
};

function getStatusMessageAlt(status: string) {
    return statusMessages[status] || 'Unknown status';
}
```

### 7. Table Export Guide With Example

#### Installation
```bash
npm install react-export-table-to-excel
```

#### Basic Implementation
```tsx
import { useRef } from 'react';
import { useDownloadExcel } from 'react-export-table-to-excel';

export function ExportableTable() {
    const tableData = [
        { id: 1, name: 'John Doe', email: 'john@example.com' },
        { id: 2, name: 'Jane Smith', email: 'jane@example.com' }
    ];
    
    const tableRef = useRef(null);
    
    const { onDownload } = useDownloadExcel({
        currentTableRef: tableRef.current,
        filename: 'Users table',
        sheet: 'Users'
    });

    return (
        <div>
            <button onClick={onDownload}>Export to Excel</button>
            <table ref={tableRef}>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody>
                    {tableData.map(user => (
                        <tr key={user.id}>
                            <td>{user.id}</td>
                            <td>{user.name}</td>
                            <td>{user.email}</td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    );
}
```

#### Advanced Export with Custom Formatting
```tsx
import { useRef } from 'react';
import { useDownloadExcel } from 'react-export-table-to-excel';

export function AdvancedExportTable() {
    const tableData = [
        { id: 1, name: 'John Doe', email: 'john@example.com', date: new Date() },
        { id: 2, name: 'Jane Smith', email: 'jane@example.com', date: new Date() }
    ];
    
    // For exporting formatted data
    const exportData = tableData.map(item => ({
        ID: item.id,
        'Full Name': item.name,
        Email: item.email,
        'Registration Date': item.date.toLocaleDateString()
    }));

    const { onDownload } = useDownloadExcel({
        currentTableRef: null, // Not using table ref
        filename: 'Users report',
        sheet: 'Users',
        data: exportData // Using custom data
    });

    return (
        <div>
            <button onClick={onDownload}>Export Formatted Data</button>
            {/* Regular table for display */}
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    {tableData.map(user => (
                        <tr key={user.id}>
                            <td>{user.id}</td>
                            <td>{user.name}</td>
                            <td>{user.email}</td>
                            <td>{user.date.toLocaleDateString()}</td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    );
}
```

### 8. Custom Layout for Login and Register, Frontend

Creating custom authentication layouts in [resources/js/layouts/auth](file:///c%3A/xampp/htdocs/leads_management/resources/js/layouts/auth):

#### Auth Layout Component
```tsx
// resources/js/layouts/auth-layout.tsx
import { type ReactNode } from 'react';
import AppLogo from '@/components/app-logo';

interface AuthLayoutProps {
    title?: string;
    children: ReactNode;
}

export default function AuthLayout({ title, children }: AuthLayoutProps) {
    return (
        <div className="min-h-screen flex flex-col sm:justify-center items-center pt-6 sm:pt-0 bg-gray-100 dark:bg-gray-900">
            <div>
                <AppLogo className="w-20 h-20 fill-current text-gray-500" />
            </div>

            <div className="w-full sm:max-w-md mt-6 px-6 py-4 bg-white dark:bg-gray-800 shadow-md overflow-hidden sm:rounded-lg">
                {title && (
                    <div className="text-center mb-6">
                        <h2 className="text-2xl font-bold text-gray-800 dark:text-white">
                            {title}
                        </h2>
                    </div>
                )}
                {children}
            </div>
        </div>
    );
}
```

#### Login Page Using Auth Layout
```tsx
// resources/js/pages/Auth/Login.tsx
import { useEffect, FormEventHandler } from 'react';
import Checkbox from '@/components/checkbox';
import InputError from '@/components/input-error';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Head, Link, useForm } from '@inertiajs/react';
import AuthLayout from '@/layouts/auth-layout';

export default function Login({ status, canResetPassword }: { status?: string; canResetPassword: boolean }) {
    const { data, setData, post, processing, errors, reset } = useForm({
        email: '',
        password: '',
        remember: false,
    });

    useEffect(() => {
        return () => {
            reset('password');
        };
    }, []);

    const submit: FormEventHandler = (e) => {
        e.preventDefault();

        post(route('login'));
    };

    return (
        <AuthLayout title="Log in to your account">
            <Head title="Log in" />

            {status && <div className="mb-4 font-medium text-sm text-green-600">{status}</div>}

            <form onSubmit={submit}>
                <div>
                    <Label htmlFor="email">Email</Label>
                    <Input
                        id="email"
                        type="email"
                        name="email"
                        value={data.email}
                        onChange={(e) => setData('email', e.target.value)}
                        required
                        autoFocus
                    />
                    <InputError message={errors.email} />
                </div>

                <div className="mt-4">
                    <Label htmlFor="password">Password</Label>
                    <Input
                        id="password"
                        type="password"
                        name="password"
                        value={data.password}
                        onChange={(e) => setData('password', e.target.value)}
                        required
                        autoComplete="current-password"
                    />
                    <InputError message={errors.password} />
                </div>

                <div className="block mt-4">
                    <label className="flex items-center">
                        <Checkbox
                            name="remember"
                            checked={data.remember}
                            onChange={(e) => setData('remember', e.target.checked)}
                        />
                        <span className="ml-2 text-sm text-gray-600 dark:text-gray-400">Remember me</span>
                    </label>
                </div>

                <div className="flex items-center justify-end mt-4">
                    {canResetPassword && (
                        <Link
                            href={route('password.request')}
                            className="underline text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800"
                        >
                            Forgot your password?
                        </Link>
                    )}

                    <button
                        className="ml-4 inline-flex items-center px-4 py-2 bg-gray-800 dark:bg-gray-200 border border-transparent rounded-md font-semibold text-xs text-white dark:text-gray-800 uppercase tracking-widest hover:bg-gray-700 dark:hover:bg-white focus:bg-gray-700 dark:focus:bg-white active:bg-gray-900 dark:active:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"
                        disabled={processing}
                    >
                        Log in
                    </button>
                </div>
            </form>
        </AuthLayout>
    );
}
```

## CRUD Implementation Guide

To implement CRUD functionality in your Laravel, Inertia.js, React project:

### 1. Create Migration
```bash
php artisan make:migration create_products_table
```

### 2. Create Model
```bash
php artisan make:model Product
```

### 3. Create Factory
```bash
php artisan make:factory ProductFactory
```

### 4. Create Seeder
```bash
php artisan make:seeder ProductSeeder
```

### 5. Create Request
```bash
php artisan make:request ProductRequest
```

### 6. Create Service
Create [ProductService.php](file:///c%3A/xampp/htdocs/leads_management/app/Services/ProductService.php) in [app/Services](file:///c%3A/xampp/htdocs/leads_management/app/Services)

### 7. Create Controller
```bash
php artisan make:controller ProductController
```

### 8. Create React Pages
Create components in [resources/js/pages/Product](file:///c%3A/xampp/htdocs/leads_management/resources/js/pages/Client):
- Index.tsx
- Create.tsx
- Edit.tsx

### 9. Add Routes
Add routes in [routes/web.php](file:///c%3A/xampp/htdocs/leads_management/routes/web.php):
```php
Route::resource('product', ProductController::class);
```

## Adding Server-side Features

### To Add Search in the Server Side

#### Backend Changes:
1. Add scope to your model:
```php
public function scopeSearch(Builder $query, ?string $search): Builder
{
    if (empty($search)) {
        return $query;
    }

    return $query->where(function (Builder $q) use ($search): void {
        $q->where('name', 'like', "%{$search}%")
            ->orWhere('description', 'like', "%{$search}%");
    });
}
```

2. Update service method to use search:
```php
public function getProductList(Request $request)
{
    $filters = [
        'search' => $request->input('search'),
        // ... other filters
    ];

    $query = Product::search($filters['search'] ?? null);
    // ... rest of implementation
}
```

#### Frontend Changes:
1. Add search input to your component:
```tsx
<Input
    type="text"
    placeholder="Search products..."
    value={searchQuery}
    onChange={handleSearchChange}
/>
```

2. Implement search handler:
```tsx
const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setSearchQuery(e.target.value);
    fetchProducts({ search: e.target.value, page: 1 });
};
```

### To Add Pagination in the Server Side

#### Backend Changes:
1. Add scope to your model:
```php
public function scopePaginateOrAll(Builder $query, int|string $perPage = 25, int $page = 1): Collection|Builder|LengthAwarePaginator
{
    if ($perPage === 'all' || $perPage === 0) {
        return $query->get();
    }

    return $query->paginate($perPage, ['*'], 'page', $page);
}
```

2. Update service method:
```php
public function getProductList(Request $request)
{
    $perPage = $request->input('per_page', 25);
    $page = $request->input('page', 1);

    $results = $query->paginateOrAll($perPage, $page);
    
    // Handle pagination response
    if ($perPage === 'all' || $perPage == 0) {
        $pagination = [
            'current_page' => 1,
            'last_page'    => 1,
            'per_page'     => 'all',
            'total'        => $results->count(),
        ];
        $products = $results;
    } else {
        $pagination = [
            'current_page' => $results->currentPage(),
            'last_page'    => $results->lastPage(),
            'per_page'     => $results->perPage(),
            'total'        => $results->total(),
        ];
        $products = $results->items();
    }

    return [
        'products'   => $products,
        'pagination' => $pagination,
    ];
}
```

#### Frontend Changes:
1. Add pagination component:
```tsx
<Pagination
    currentPage={pagination.current_page}
    totalPages={pagination.last_page}
    onPageChange={handlePageChange}
/>
```

2. Implement page change handler:
```tsx
const handlePageChange = (page: number) => {
    setCurrentPage(page);
    fetchProducts({ page });
};
```

### To Add Sort in the Server Side

#### Backend Changes:
1. Add scope to your model:
```php
public function scopeSortBy(Builder $query, string $sortBy, string $sortDirection = 'desc'): Builder
{
    return $query->orderBy($sortBy, $sortDirection);
}
```

2. Update service method:
```php
public function getProductList(Request $request)
{
    $filters = [
        'sort_by'        => $request->input('sort_by', 'id'),
        'sort_direction' => $request->input('sort_direction', 'desc'),
    ];

    $query = Product::sortBy($filters['sort_by'] ?? 'id', $filters['sort_direction'] ?? 'desc');
    // ... rest of implementation
}
```

#### Frontend Changes:
1. Add sort handler:
```tsx
const handleSort = (column: string) => {
    const newDirection = sortBy === column && sortDirection === 'asc' ? 'desc' : 'asc';
    setSortBy(column);
    setSortDirection(newDirection);
    fetchProducts({ sort_by: column, sort_direction: newDirection, page: 1 });
};
```

2. Add sort indicators to table headers:
```tsx
<th className="cursor-pointer" onClick={() => handleSort('name')}>
    Name
    {sortBy === 'name' && (
        sortDirection === 'asc' ? <ArrowUp size={14} /> : <ArrowDown size={14} />
    )}
</th>
```

### To Add Reset in the Server Side

#### Backend Changes:
No backend changes needed - just ensure your default values are set correctly in the service.

#### Frontend Changes:
1. Add reset handler:
```tsx
const resetTable = () => {
    setSearchQuery('');
    setPerPage(25);
    setCurrentPage(1);
    setSortBy('id');
    setSortDirection('desc');
    fetchProducts({ 
        search: '', 
        per_page: 25, 
        page: 1, 
        sort_by: 'id', 
        sort_direction: 'desc' 
    });
};
```

2. Add reset button:
```tsx
<Button onClick={resetTable}>Reset</Button>
```

## Step-by-Step CRUD Implementation with Post Model

### Plain Index Table

#### Command to generate the Post model and related files:
```bash
php artisan make:model Post -mf
```

#### Migration file (database/migrations/xxxx_xx_xx_create_posts_table.php):
```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    /**
     * Run the migrations.
     */
    public function up(): void
    {
        Schema::create('posts', function (Blueprint $table) {
            $table->id();
            $table->string('title');
            $table->text('description')->nullable();
            $table->string('image')->nullable();
            $table->boolean('is_published')->default(false);
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     */
    public function down(): void
    {
        Schema::dropIfExists('posts');
    }
};
```

#### Model file (app/Models/Post.php):
```php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Post extends Model
{
    use HasFactory;

    protected $fillable = [
        'title',
        'description',
        'image',
        'is_published',
    ];

    protected $casts = [
        'is_published' => 'boolean',
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
    ];
}
```

#### Factory file (database/factories/PostFactory.php):
```php
<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\Post>
 */
class PostFactory extends Factory
{
    /**
     * Define the model's default state.
     *
     * @return array<string, mixed>
     */
    public function definition(): array
    {
        return [
            'title' => fake()->sentence(),
            'description' => fake()->paragraph(),
            'image' => fake()->imageUrl(),
            'is_published' => fake()->boolean(),
        ];
    }
}
```

#### Command to create the controller:
```bash
php artisan make:controller PostController --model=Post --requests
```

#### Controller file (app/Http/Controllers/PostController.php):
```php
<?php

namespace App\Http\Controllers;

use App\Models\Post;
use App\Http\Requests\StorePostRequest;
use App\Http\Requests\UpdatePostRequest;
use Inertia\Inertia;

class PostController extends Controller
{
    /**
     * Display a listing of the resource.
     */
    public function index()
    {
        $posts = Post::all();
        return Inertia::render('Post/Index', [
            'posts' => $posts,
        ]);
    }

    /**
     * Show the form for creating a new resource.
     */
    public function create()
    {
        return Inertia::render('Post/Create');
    }

    /**
     * Store a newly created resource in storage.
     */
    public function store(StorePostRequest $request)
    {
        Post::create($request->validated());
        
        return redirect()->route('post.index')->with('success', 'Post created successfully.');
    }

    /**
     * Show the form for editing the specified resource.
     */
    public function edit(Post $post)
    {
        return Inertia::render('Post/Edit', [
            'post' => $post,
        ]);
    }

    /**
     * Update the specified resource in storage.
     */
    public function update(UpdatePostRequest $request, Post $post)
    {
        $post->update($request->validated());
        
        return redirect()->route('post.index')->with('success', 'Post updated successfully.');
    }

    /**
     * Remove the specified resource from storage.
     */
    public function destroy(Post $post)
    {
        $post->delete();
        
        return redirect()->route('post.index')->with('success', 'Post deleted successfully.');
    }
}
```

#### Request files (app/Http/Requests/StorePostRequest.php):
```php
<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class StorePostRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
     */
    public function rules(): array
    {
        return [
            'title' => 'required|string|max:255',
            'description' => 'nullable|string',
            'image' => 'nullable|string|max:255',
            'is_published' => 'boolean',
        ];
    }
}
```

#### Request files (app/Http/Requests/UpdatePostRequest.php):
```php
<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class UpdatePostRequest extends FormRequest
{
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
     */
    public function rules(): array
    {
        return [
            'title' => 'sometimes|required|string|max:255',
            'description' => 'nullable|string',
            'image' => 'nullable|string|max:255',
            'is_published' => 'boolean',
        ];
    }
}
```

#### Routes (routes/web.php):
```php
<?php

use App\Http\Controllers\PostController;
use Illuminate\Support\Facades\Route;

Route::resource('post', PostController::class);
```

#### Plain Index Table TSX Component (resources/js/pages/Post/Index.tsx):
```tsx
import { Head, Link } from '@inertiajs/react';
import AppLayout from '@/layouts/app-layout';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Pencil, Plus, Trash2 } from 'lucide-react';

interface Post {
  id: number;
  title: string;
  description: string | null;
  image: string | null;
  is_published: boolean;
  created_at: string;
  updated_at: string;
}

interface IndexProps {
  posts: Post[];
}

export default function Index({ posts }: IndexProps) {
    return (
        <AppLayout>
            <Head title="Posts" />
            
            <div className="flex justify-between items-center mb-6">
                <h1 className="text-2xl font-bold">Posts</h1>
                <Button asChild>
                    <Link href={route('post.create')}>
                        <Plus className="mr-2 h-4 w-4" /> Create Post
                    </Link>
                </Button>
            </div>

            <Card>
                <CardHeader>
                    <CardTitle>All Posts</CardTitle>
                </CardHeader>
                <CardContent>
                    <div className="overflow-x-auto">
                        <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead className="bg-gray-50 dark:bg-gray-800">
                                <tr>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ID</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Title</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Description</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Published</th>
                                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Created At</th>
                                    <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                                {posts.map((post) => (
                                    <tr key={post.id}>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">{post.id}</td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">{post.title}</td>
                                        <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                                            {post.description?.substring(0, 50)}{post.description && post.description.length > 50 ? '...' : ''}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            {post.is_published ? (
                                                <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                                    Published
                                                </span>
                                            ) : (
                                                <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                                    Draft
                                                </span>
                                            )}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                                            {new Date(post.created_at).toLocaleDateString()}
                                        </td>
                                        <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                            <div className="flex justify-end space-x-2">
                                                <Button variant="outline" size="sm" asChild>
                                                    <Link href={route('post.edit', post.id)}>
                                                        <Pencil className="h-4 w-4" />
                                                    </Link>
                                                </Button>
                                                <Button variant="outline" size="sm" asChild>
                                                    <Link
                                                        href={route('post.destroy', post.id)}
                                                        method="delete"
                                                        onClick={(e) => {
                                                            if (!confirm('Are you sure you want to delete this post?')) {
                                                                e.preventDefault();
                                                            }
                                                        }}
                                                    >
                                                        <Trash2 className="h-4 w-4" />
                                                    </Link>
                                                </Button>
                                            </div>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </CardContent>
            </Card>
        </AppLayout>
    );
}
```

### Adding Search

#### Backend Changes

##### 1. Update the Post Model with Search Scope

Command to create a trait for scopes:
```bash
mkdir -p app/Models/Traits/Scopes
```

File: `app/Models/Traits/Scopes/PostScopes.php`
```php
<?php

namespace App\Models\Traits\Scopes;

use Illuminate\Database\Eloquent\Builder;

trait PostScopes
{
    /**
     * Scope a query to search posts
     */
    public function scopeSearch(Builder $query, ?string $search): Builder
    {
        if (empty($search)) {
            return $query;
        }

        return $query->where(function (Builder $q) use ($search): void {
            $q->where('title', 'like', "%{$search}%")
                ->orWhere('description', 'like', "%{$search}%");
        });
    }
}
```

##### 2. Apply the Trait to the Post Model

File: `app/Models/Post.php` (updated)
```php
<?php

namespace App\Models;

use App\Models\Traits\Scopes\PostScopes;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;

class Post extends Model
{
    use HasFactory, PostScopes;

    protected $fillable = [
        'title',
        'description',
        'image',
        'is_published',
    ];

    protected $casts = [
        'is_published' => 'boolean',
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
    ];
}
```

##### 3. Update the Post Controller to Handle Search

File: `app/Http/Controllers/PostController.php` (updated index method)
```php
<?php

namespace App\Http\Controllers;

use App\Models\Post;
use App\Http\Requests\StorePostRequest;
use App\Http\Requests\UpdatePostRequest;
use Illuminate\Http\Request;
use Inertia\Inertia;

class PostController extends Controller
{
    /**
     * Display a listing of the resource.
     */
    public function index(Request $request)
    {
        $search = $request->input('search');
        
        $posts = Post::search($search)->get();
        
        return Inertia::render('Post/Index', [
            'posts' => $posts,
            'filters' => [
                'search' => $search,
            ],
        ]);
    }

    // ... rest of the controller methods remain the same
}
```

#### Frontend Changes

##### Update the Index TSX Component with Search

File: `resources/js/pages/Post/Index.tsx` (updated)
```tsx
import { Head, Link, router } from '@inertiajs/react';
import AppLayout from '@/layouts/app-layout';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Search, Pencil, Plus, Trash2 } from 'lucide-react';
import { useState } from 'react';

interface Post {
  id: number;
  title: string;
  description: string | null;
  image: string | null;
  is_published: boolean;
  created_at: string;
  updated_at: string;
}

interface IndexProps {
  posts: Post[];
  filters: {
    search: string | null;
  };
}

export default function Index({ posts, filters }: IndexProps) {
  const [searchQuery, setSearchQuery] = useState(filters.search || '');

  const handleSearch = (e: React.FormEvent) => {
    e.preventDefault();
    router.get(route('post.index'), { search: searchQuery }, {
      preserveState: true,
      replace: true,
    });
  };

  const resetSearch = () => {
    setSearchQuery('');
    router.get(route('post.index'), { search: '' }, {
      preserveState: true,
      replace: true,
    });
  };

  return (
    <AppLayout>
      <Head title="Posts" />
      
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-2xl font-bold">Posts</h1>
        <Button asChild>
          <Link href={route('post.create')}>
            <Plus className="mr-2 h-4 w-4" /> Create Post
          </Link>
        </Button>
      </div>

      <Card className="mb-6">
        <CardContent className="pt-6">
          <form onSubmit={handleSearch} className="flex gap-2">
            <div className="relative flex-1">
              <Input
                type="text"
                placeholder="Search posts..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="pl-10"
              />
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" />
            </div>
            <Button type="submit">Search</Button>
            <Button type="button" variant="outline" onClick={resetSearch}>
              Reset
            </Button>
          </form>
        </CardContent>
      </Card>

      <Card>
        <CardHeader>
          <CardTitle>All Posts</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="overflow-x-auto">
            <table className="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
              <thead className="bg-gray-50 dark:bg-gray-800">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ID</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Title</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Description</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Published</th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Created At</th>
                  <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody className="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                {posts.map((post) => (
                  <tr key={post.id}>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">{post.id}</td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">{post.title}</td>
                    <td className="px-6 py-4 text-sm text-gray-500 dark:text-gray-400">
                      {post.description?.substring(0, 50)}{post.description && post.description.length > 50 ? '...' : ''}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                      {post.is_published ? (
                        <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                          Published
                        </span>
                      ) : (
                        <span className="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                          Draft
                        </span>
                      )}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400">
                      {new Date(post.created_at).toLocaleDateString()}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                      <div className="flex justify-end space-x-2">
                        <Button variant="outline" size="sm" asChild>
                          <Link href={route('post.edit', post.id)}>
                            <Pencil className="h-4 w-4" />
                          </Link>
                        </Button>
                        <Button variant="outline" size="sm" asChild>
                          <Link
                            href={route('post.destroy', post.id)}
                            method="delete"
                            onClick={(e) => {
                              if (!confirm('Are you sure you want to delete this post?')) {
                                e.preventDefault();
                              }
                            }}
                          >
                            <Trash2 className="h-4 w-4" />
                          </Link>
                        </Button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </CardContent>
      </Card>
    </AppLayout>
  );
}
```

### Adding Sort

#### Backend Changes

##### 1. Update the PostScopes Trait with Sort Functionality

File: `app/Models/Traits/Scopes/PostScopes.php` (updated)
```php
<?php

namespace App\Models\Traits\Scopes;

use Illuminate\Database\Eloquent\Builder;

trait PostScopes
{
    /**
     * Scope a query to search posts
     */
    public function scopeSearch(Builder $query, ?string $search): Builder
    {
        if (empty($search)) {
            return $query;
        }

        return $query->where(function (Builder $q) use ($search): void {
            $q->where('title', 'like', "%{$search}%")
                ->orWhere('description', 'like', "%{$search}%");
        });
    }

    /**
     * Scope a query to sort posts
     */
    public function scopeSortBy(Builder $query, string $sortBy, string $sortDirection = 'asc'): Builder
    {
        return $query->orderBy($sortBy, $sortDirection);
    }
}
```

##### 2. Update the Post Controller to Handle Sort

File: `app/Http/Controllers/PostController.php` (updated index method)
```php
<?php

namespace App\Http\Controllers;

use App\Models\Post;
use App\Http\Requests\StorePostRequest;
use App\Http\Requests\UpdatePostRequest;
use Illuminate\Http\Request;
use Inertia\Inertia;

class PostController extends Controller
{
    /**
     * Display a listing of the resource.
     */
    public function index(Request $request)
    {
        $search = $request->input('search');
        $sortBy = $request->input('sort_by', 'id');
        $sortDirection = $request->input('sort_direction', 'asc');
        
        $posts = Post::search($search)
            ->sortBy($sortBy, $sortDirection)
            ->get();
        
        return Inertia::render('Post