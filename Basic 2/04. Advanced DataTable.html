<h2 id="part-6-advanced-features-for-the-task-management-app">Part 6:
Advanced Features for the Task Management App</h2>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li><p>Ensure the app has the setup from previous steps (Laravel Breeze,
Inertia, React, TypeScript, Redux, Laravel Echo, Tailwind CSS,
etc.).</p></li>
<li><p>Install additional dependencies:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install react-table @tanstack/react-table @headlessui/react</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">composer</span> require intervention/image</span></code></pre></div></li>
</ul>
<h3 id="step-1-advanced-datatable-with-react-table">Step 1: Advanced
DataTable with react-table</h3>
<p>Replace the task list with a sortable, filterable DataTable.</p>
<ul>
<li><p><strong>Update Task Model</strong>: Add an <code>image</code>
column for image uploads:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan make:migration add_image_to_tasks</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cn">S</span>chema::table(<span class="st">&#39;tasks&#39;</span><span class="ot">,</span> <span class="kw">function</span> (<span class="cn">B</span>lueprint <span class="va">$table</span>) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">$table</span>-&gt;<span class="dt">string</span>(<span class="st">&#39;image&#39;</span>)-&gt;nullable()<span class="ot">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>})<span class="ot">;</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan migrate</span></code></pre></div></li>
<li><p><strong>Update TaskController</strong>
(<code>app/Http/Controllers/TaskController.php</code>): Ensure tasks
include the <code>image</code> field:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> index(<span class="cn">R</span>equest <span class="va">$request</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">$query</span> <span class="op">=</span> <span class="cn">T</span>ask::with(<span class="st">&#39;category&#39;</span>)-&gt;where(<span class="st">&#39;user_id&#39;</span><span class="ot">,</span> auth()-&gt;id())</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                 -&gt;orderBy(<span class="st">&#39;order&#39;</span>)<span class="ot">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="va">$request</span>-&gt;has(<span class="st">&#39;search&#39;</span>)) {</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">$query</span>-&gt;where(<span class="st">&#39;title&#39;</span><span class="ot">,</span> <span class="st">&#39;like&#39;</span><span class="ot">,</span> <span class="st">&#39;%&#39;</span> <span class="op">.</span> <span class="va">$request</span>-&gt;search <span class="op">.</span> <span class="st">&#39;%&#39;</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>              -&gt;orWhere(<span class="st">&#39;description&#39;</span><span class="ot">,</span> <span class="st">&#39;like&#39;</span><span class="ot">,</span> <span class="st">&#39;%&#39;</span> <span class="op">.</span> <span class="va">$request</span>-&gt;search <span class="op">.</span> <span class="st">&#39;%&#39;</span>)<span class="ot">;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">$tasks</span> <span class="op">=</span> <span class="va">$query</span>-&gt;paginate(<span class="dv">10</span>)<span class="ot">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">$categories</span> <span class="op">=</span> <span class="cn">C</span>ategory::all()<span class="ot">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="cn">I</span>nertia::render(<span class="st">&#39;Tasks/Index&#39;</span><span class="ot">,</span> [</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;tasks&#39;</span> =&gt; <span class="va">$tasks</span><span class="ot">,</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;categories&#39;</span> =&gt; <span class="va">$categories</span><span class="ot">,</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;filters&#39;</span> =&gt; [<span class="st">&#39;search&#39;</span> =&gt; <span class="va">$request</span>-&gt;search]<span class="ot">,</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;auth&#39;</span> =&gt; auth()-&gt;user()<span class="ot">,</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>Create DataTable Component</strong>:</p>
<pre class="tsx"><code></code></pre>
<p>import React, { useMemo } from â€˜reactâ€™; import { useTable, useSortBy,
useGlobalFilter } from â€˜<span class="citation"
data-cites="tanstack/react-table">@tanstack/react-table</span>â€™; import
{ Link } from â€˜<span class="citation"
data-cites="inertiajs/react">@inertiajs/react</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</p></li>
</ul>
<p>interface Task { id: number; title: string; description: string |
null; completed: boolean; category_id: number | null; category: { id:
number; name: string } | null; user_id: number; order: number; image:
string | null; }</p>
<p>interface DataTableProps { data: Task[]; onEdit: (id: number) =&gt;
void; onDelete: (id: number) =&gt; void; onView: (task: Task) =&gt;
void; }</p>
<p>const DataTable: React.FC<DataTableProps> = ({ data, onEdit,
onDelete, onView }) =&gt; { const { t } = useTranslation();</p>
<pre><code>const columns = useMemo(
    () =&gt; [
        {
            Header: t(&#39;Title&#39;),
            accessor: &#39;title&#39;,
        },
        {
            Header: t(&#39;Category&#39;),
            accessor: &#39;category.name&#39;,
            Cell: ({ value }: { value: string }) =&gt; value || &#39;N/A&#39;,
        },
        {
            Header: t(&#39;Status&#39;),
            accessor: &#39;completed&#39;,
            Cell: ({ value }: { value: boolean }) =&gt; (value ? t(&#39;Completed&#39;) : t(&#39;Pending&#39;)),
        },
        {
            Header: t(&#39;Actions&#39;),
            Cell: ({ row }: { row: { original: Task } }) =&gt; (
                &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;button
                        onClick={() =&gt; onView(row.original)}
                        className=&quot;text-blue-600 hover:underline&quot;
                        aria-label={`${t(&#39;View&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;View&#39;)}
                    &lt;/button&gt;
                    &lt;button
                        onClick={() =&gt; onEdit(row.original.id)}
                        className=&quot;text-blue-600 hover:underline&quot;
                        aria-label={`${t(&#39;Edit&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;Edit&#39;)}
                    &lt;/button&gt;
                    &lt;button
                        onClick={() =&gt; onDelete(row.original.id)}
                        className=&quot;text-red-600 hover:underline&quot;
                        aria-label={`${t(&#39;Delete&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;Delete&#39;)}
                    &lt;/button&gt;
                &lt;/div&gt;
            ),
        },
    ],
    [t, onEdit, onDelete, onView]
);

const {
    getTableProps,
    getTableBodyProps,
    headerGroups,
    rows,
    prepareRow,
    state,
    setGlobalFilter,
} = useTable({ columns, data }, useGlobalFilter, useSortBy);

return (
    &lt;div&gt;
        &lt;input
            type=&quot;text&quot;
            value={state.globalFilter || &#39;&#39;}
            onChange={(e) =&gt; setGlobalFilter(e.target.value)}
            placeholder={t(&#39;Search tasks...&#39;)}
            className=&quot;border p-2 w-full mb-2&quot;
            aria-label={t(&#39;Search tasks...&#39;)}
        /&gt;
        &lt;table {...getTableProps()} className=&quot;w-full border-collapse&quot;&gt;
            &lt;thead&gt;
                {headerGroups.map((headerGroup) =&gt; (
                    &lt;tr {...headerGroup.getHeaderGroupProps()}&gt;
                        {headerGroup.headers.map((column) =&gt; (
                            &lt;th
                                {...column.getHeaderProps(column.getSortByToggleProps())}
                                className=&quot;p-2 border bg-gray-100&quot;
                            &gt;
                                {column.render(&#39;Header&#39;)}
                                &lt;span&gt;
                                    {column.isSorted
                                        ? column.isSortedDesc
                                            ? &#39; ðŸ”½&#39;
                                            : &#39; ðŸ”¼&#39;
                                        : &#39;&#39;}
                                &lt;/span&gt;
                            &lt;/th&gt;
                        ))}
                    &lt;/tr&gt;
                ))}
            &lt;/thead&gt;
            &lt;tbody {...getTableBodyProps()}&gt;
                {rows.map((row) =&gt; {
                    prepareRow(row);
                    return (
                        &lt;tr {...row.getRowProps()} className=&quot;border-b&quot;&gt;
                            {row.cells.map((cell) =&gt; (
                                &lt;td {...cell.getCellProps()} className=&quot;p-2&quot;&gt;
                                    {cell.render(&#39;Cell&#39;)}
                                &lt;/td&gt;
                            ))}
                        &lt;/tr&gt;
                    );
                })}
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/div&gt;
);</code></pre>
<p>};</p>
<p>export default DataTable;
```<xaiArtifact artifact_id="a42450e5-c986-4e65-a479-1e7cef3627fa" artifact_version_id="9ca54560-6f5f-49b6-8028-bed93d5ab933" title="DataTable.tsx" contentType="text/typescript">
import React, { useMemo } from â€˜reactâ€™; import { useTable, useSortBy,
useGlobalFilter } from â€˜<span class="citation"
data-cites="tanstack/react-table">@tanstack/react-table</span>â€™; import
{ Link } from â€˜<span class="citation"
data-cites="inertiajs/react">@inertiajs/react</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</p>
<p>interface Task { id: number; title: string; description: string |
null; completed: boolean; category_id: number | null; category: { id:
number; name: string } | null; user_id: number; order: number; image:
string | null; }</p>
<p>interface DataTableProps { data: Task[]; onEdit: (id: number) =&gt;
void; onDelete: (id: number) =&gt; void; onView: (task: Task) =&gt;
void; }</p>
<p>const DataTable: React.FC<DataTableProps> = ({ data, onEdit,
onDelete, onView }) =&gt; { const { t } = useTranslation();</p>
<pre><code>const columns = useMemo(
    () =&gt; [
        {
            Header: t(&#39;Title&#39;),
            accessor: &#39;title&#39;,
        },
        {
            Header: t(&#39;Category&#39;),
            accessor: &#39;category.name&#39;,
            Cell: ({ value }: { value: string }) =&gt; value || &#39;N/A&#39;,
        },
        {
            Header: t(&#39;Status&#39;),
            accessor: &#39;completed&#39;,
            Cell: ({ value }: { value: boolean }) =&gt; (value ? t(&#39;Completed&#39;) : t(&#39;Pending&#39;)),
        },
        {
            Header: t(&#39;Actions&#39;),
            Cell: ({ row }: { row: { original: Task } }) =&gt; (
                &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;button
                        onClick={() =&gt; onView(row.original)}
                        className=&quot;text-blue-600 hover:underline&quot;
                        aria-label={`${t(&#39;View&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;View&#39;)}
                    &lt;/button&gt;
                    &lt;button
                        onClick={() =&gt; onEdit(row.original.id)}
                        className=&quot;text-blue-600 hover:underline&quot;
                        aria-label={`${t(&#39;Edit&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;Edit&#39;)}
                    &lt;/button&gt;
                    &lt;button
                        onClick={() =&gt; onDelete(row.original.id)}
                        className=&quot;text-red-600 hover:underline&quot;
                        aria-label={`${t(&#39;Delete&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;Delete&#39;)}
                    &lt;/button&gt;
                &lt;/div&gt;
            ),
        },
    ],
    [t, onEdit, onDelete, onView]
);

const {
    getTableProps,
    getTableBodyProps,
    headerGroups,
    rows,
    prepareRow,
    state,
    setGlobalFilter,
} = useTable({ columns, data }, useGlobalFilter, useSortBy);

return (
    &lt;div&gt;
        &lt;input
            type=&quot;text&quot;
            value={state.globalFilter || &#39;&#39;}
            onChange={(e) =&gt; setGlobalFilter(e.target.value)}
            placeholder={t(&#39;Search tasks...&#39;)}
            className=&quot;border p-2 w-full mb-2&quot;
            aria-label={t(&#39;Search tasks...&#39;)}
        /&gt;
        &lt;table {...getTableProps()} className=&quot;w-full border-collapse&quot;&gt;
            &lt;thead&gt;
                {headerGroups.map((headerGroup) =&gt; (
                    &lt;tr {...headerGroup.getHeaderGroupProps()}&gt;
                        {headerGroup.headers.map((column) =&gt; (
                            &lt;th
                                {...column.getHeaderProps(column.getSortByToggleProps())}
                                className=&quot;p-2 border bg-gray-100&quot;
                            &gt;
                                {column.render(&#39;Header&#39;)}
                                &lt;span&gt;
                                    {column.isSorted
                                        ? column.isSortedDesc
                                            ? &#39; ðŸ”½&#39;
                                            : &#39; ðŸ”¼&#39;
                                        : &#39;&#39;}
                                &lt;/span&gt;
                            &lt;/th&gt;
                        ))}
                    &lt;/tr&gt;
                ))}
            &lt;/thead&gt;
            &lt;tbody {...getTableBodyProps()}&gt;
                {rows.map((row) =&gt; {
                    prepareRow(row);
                    return (
                        &lt;tr {...row.getRowProps()} className=&quot;border-b&quot;&gt;
                            {row.cells.map((cell) =&gt; (
                                &lt;td {...cell.getCellProps()} className=&quot;p-2&quot;&gt;
                                    {cell.render(&#39;Cell&#39;)}
                                &lt;/td&gt;
                            ))}
                        &lt;/tr&gt;
                    );
                })}
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/div&gt;
);</code></pre>
<p>};</p>
<p>export default DataTable; </xaiArtifact>```typescript import React, {
useMemo } from â€˜reactâ€™; import { useTable, useSortBy, useGlobalFilter }
from â€˜<span class="citation"
data-cites="tanstack/react-table">@tanstack/react-table</span>â€™; import
{ Link } from â€˜<span class="citation"
data-cites="inertiajs/react">@inertiajs/react</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</p>
<p>interface Task { id: number; title: string; description: string |
null; completed: boolean; category_id: number | null; category: { id:
number; name: string } | null; user_id: number; order: number; image:
string | null; }</p>
<p>interface DataTableProps { data: Task[]; onEdit: (id: number) =&gt;
void; onDelete: (id: number) =&gt; void; onView: (task: Task) =&gt;
void; }</p>
<p>const DataTable: React.FC<DataTableProps> = ({ data, onEdit,
onDelete, onView }) =&gt; { const { t } = useTranslation();</p>
<pre><code>const columns = useMemo(
    () =&gt; [
        {
            Header: t(&#39;Title&#39;),
            accessor: &#39;title&#39;,
        },
        {
            Header: t(&#39;Category&#39;),
            accessor: &#39;category.name&#39;,
            Cell: ({ value }: { value: string }) =&gt; value || &#39;N/A&#39;,
        },
        {
            Header: t(&#39;Status&#39;),
            accessor: &#39;completed&#39;,
            Cell: ({ value }: { value: boolean }) =&gt; (value ? t(&#39;Completed&#39;) : t(&#39;Pending&#39;)),
        },
        {
            Header: t(&#39;Actions&#39;),
            Cell: ({ row }: { row: { original: Task } }) =&gt; (
                &lt;div className=&quot;flex space-x-2&quot;&gt;
                    &lt;button
                        onClick={() =&gt; onView(row.original)}
                        className=&quot;text-blue-600 hover:underline&quot;
                        aria-label={`${t(&#39;View&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;View&#39;)}
                    &lt;/button&gt;
                    &lt;button
                        onClick={() =&gt; onEdit(row.original.id)}
                        className=&quot;text-blue-600 hover:underline&quot;
                        aria-label={`${t(&#39;Edit&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;Edit&#39;)}
                    &lt;/button&gt;
                    &lt;button
                        onClick={() =&gt; onDelete(row.original.id)}
                        className=&quot;text-red-600 hover:underline&quot;
                        aria-label={`${t(&#39;Delete&#39;)} ${row.original.title}`}
                    &gt;
                        {t(&#39;Delete&#39;)}
                    &lt;/button&gt;
                &lt;/div&gt;
            ),
        },
    ],
    [t, onEdit, onDelete, onView]
);

const {
    getTableProps,
    getTableBodyProps,
    headerGroups,
    rows,
    prepareRow,
    state,
    setGlobalFilter,
} = useTable({ columns, data }, useGlobalFilter, useSortBy);

return (
    &lt;div&gt;
        &lt;input
            type=&quot;text&quot;
            value={state.globalFilter || &#39;&#39;}
            onChange={(e) =&gt; setGlobalFilter(e.target.value)}
            placeholder={t(&#39;Search tasks...&#39;)}
            className=&quot;border p-2 w-full mb-2&quot;
            aria-label={t(&#39;Search tasks...&#39;)}
        /&gt;
        &lt;table {...getTableProps()} className=&quot;w-full border-collapse&quot;&gt;
            &lt;thead&gt;
                {headerGroups.map((headerGroup) =&gt; (
                    &lt;tr {...headerGroup.getHeaderGroupProps()}&gt;
                        {headerGroup.headers.map((column) =&gt; (
                            &lt;th
                                {...column.getHeaderProps(column.getSortByToggleProps())}
                                className=&quot;p-2 border bg-gray-100&quot;
                            &gt;
                                {column.render(&#39;Header&#39;)}
                                &lt;span&gt;
                                    {column.isSorted
                                        ? column.isSortedDesc
                                            ? &#39; ðŸ”½&#39;
                                            : &#39; ðŸ”¼&#39;
                                        : &#39;&#39;}
                                &lt;/span&gt;
                            &lt;/th&gt;
                        ))}
                    &lt;/tr&gt;
                ))}
            &lt;/thead&gt;
            &lt;tbody {...getTableBodyProps()}&gt;
                {rows.map((row) =&gt; {
                    prepareRow(row);
                    return (
                        &lt;tr {...row.getRowProps()} className=&quot;border-b&quot;&gt;
                            {row.cells.map((cell) =&gt; (
                                &lt;td {...cell.getCellProps()} className=&quot;p-2&quot;&gt;
                                    {cell.render(&#39;Cell&#39;)}
                                &lt;/td&gt;
                            ))}
                        &lt;/tr&gt;
                    );
                })}
            &lt;/tbody&gt;
        &lt;/table&gt;
    &lt;/div&gt;
);</code></pre>
<p>};</p>
<p>export default DataTable;</p>
<pre><code></code></pre>
<ul>
<li><strong>Update Index Component</strong>
(<code>resources/js/Pages/Tasks/Index.tsx</code>):
<code>tsx</code>typescript import React, { useContext, useEffect,
useState } from â€˜reactâ€™; import { Link, usePage } from â€˜<span
class="citation" data-cites="inertiajs/react">@inertiajs/react</span>â€™;
import { useDispatch, useSelector } from â€˜react-reduxâ€™; import {
setTasks, addTask } from â€˜../Store/taskSliceâ€™; import { FilterContext }
from â€˜../Context/FilterContextâ€™; import { Inertia } from â€˜<span
class="citation"
data-cites="inertiajs/inertia">@inertiajs/inertia</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™; import LanguageSwitcher from
â€˜../Components/LanguageSwitcherâ€™; import DataTable from â€˜./DataTableâ€™;
import Modal from â€˜../Components/Modalâ€™;</li>
</ul>
<p>interface Task { id: number; title: string; description: string |
null; completed: boolean; category_id: number | null; category: { id:
number; name: string } | null; user_id: number; order: number; image:
string | null; }</p>
<p>interface Category { id: number; name: string; }</p>
<p>interface User { id: number; name: string; email: string; }</p>
<p>interface PageProps { tasks: { data: Task[]; links: { url: string;
label: string; active: boolean }[] }; categories: Category[]; filters: {
search?: string }; flash: { message?: string }; auth: User; }</p>
<p>function Index({ tasks: initialTasks, categories, filters, auth }:
PageProps) { const { t } = useTranslation(); const { flash } =
usePage<PageProps>().props; const dispatch = useDispatch(); const tasks
= useSelector((state: { tasks: { tasks: Task[] } }) =&gt;
state.tasks.tasks); const { filter } = useContext(FilterContext); const
[search, setSearch] = useState<string>(filters.search || â€™â€™); const
[selectedTask, setSelectedTask] = useState&lt;Task | null&gt;(null);
const [showCreateModal, setShowCreateModal] = useState(false);</p>
<pre><code>useEffect(() =&gt; {
    dispatch(setTasks(initialTasks.data));

    window.Echo.private(`user.${auth.id}`).listen(&#39;TaskCreated&#39;, (e: { task: Task }) =&gt; {
        dispatch(addTask(e.task));
    });

    return () =&gt; {
        window.Echo.leave(`user.${auth.id}`);
    };
}, [initialTasks.data, dispatch, auth.id]);

const filteredTasks = tasks.filter((task) =&gt; {
    if (filter === &#39;completed&#39;) return task.completed;
    if (filter === &#39;pending&#39;) return !task.completed;
    if (filter !== &#39;all&#39; &amp;&amp; filter !== &#39;completed&#39; &amp;&amp; filter !== &#39;pending&#39;) {
        return task.category_id === parseInt(filter);
    }
    return true;
});

const handleSearch = (e: React.ChangeEvent&lt;HTMLInputElement&gt;) =&gt; {
    setSearch(e.target.value);
    Inertia.get(&#39;/tasks&#39;, { search: e.target.value }, { preserveState: true });
};

const handleDelete = (id: number) =&gt; {
    if (confirm(t(&#39;Are you sure you want to delete this task?&#39;))) {
        Inertia.delete(`/tasks/${id}`);
    }
};

return (
    &lt;div className=&quot;max-w-4xl mx-auto p-4&quot;&gt;
        &lt;LanguageSwitcher /&gt;
        &lt;h1 className=&quot;text-2xl font-bold&quot;&gt;{t(&#39;Task Manager&#39;)}&lt;/h1&gt;
        &lt;p&gt;{t(&#39;Welcome&#39;, { name: auth.name })}&lt;/p&gt;
        {flash.message &amp;&amp; &lt;div className=&quot;text-green-600&quot;&gt;{flash.message}&lt;/div&gt;}
        &lt;button
            onClick={() =&gt; setShowCreateModal(true)}
            className=&quot;text-blue-600 hover:underline mb-4&quot;
        &gt;
            {t(&#39;Add New Task&#39;)}
        &lt;/button&gt;
        &lt;DataTable
            data={filteredTasks}
            onEdit={(id) =&gt; Inertia.visit(`/tasks/${id}/edit`)}
            onDelete={handleDelete}
            onView={setSelectedTask}
        /&gt;
        &lt;div className=&quot;mt-4&quot;&gt;
            {initialTasks.links.map((link, index) =&gt; (
                &lt;Link
                    key={index}
                    href={link.url}
                    className={`mr-2 p-2 ${link.active ? &#39;bg-blue-500 text-white&#39; : &#39;bg-gray-200&#39;}`}
                    dangerouslySetInnerHTML={{ __html: link.label }}
                    aria-current={link.active ? &#39;page&#39; : undefined}
                /&gt;
            ))}
        &lt;/div&gt;
        {selectedTask &amp;&amp; (
            &lt;Modal onClose={() =&gt; setSelectedTask(null)}&gt;
                &lt;h2 className=&quot;text-xl font-bold&quot;&gt;{selectedTask.title}&lt;/h2&gt;
                &lt;p&gt;{selectedTask.description || &#39;No description&#39;}&lt;/p&gt;
                &lt;p&gt;{t(&#39;Status&#39;)}: {selectedTask.completed ? t(&#39;Completed&#39;) : t(&#39;Pending&#39;)}&lt;/p&gt;
                {selectedTask.category &amp;&amp; &lt;p&gt;{t(&#39;Category&#39;)}: {selectedTask.category.name}&lt;/p&gt;}
                {selectedTask.image &amp;&amp; (
                    &lt;img src={selectedTask.image} alt={selectedTask.title} className=&quot;max-w-xs&quot; /&gt;
                )}
            &lt;/Modal&gt;
        )}
        {showCreateModal &amp;&amp; (
            &lt;Modal onClose={() =&gt; setShowCreateModal(false)}&gt;
                &lt;Create categories={categories} onClose={() =&gt; setShowCreateModal(false)} /&gt;
            &lt;/Modal&gt;
        )}
    &lt;/div&gt;
);</code></pre>
<p>}</p>
<p>export default Index;</p>
<pre><code></code></pre>
<p><strong>Explanation</strong>: The <code>DataTable</code> component
uses <code>@tanstack/react-table</code> for sorting and filtering,
replacing the previous list. It supports viewing, editing, and deleting
tasks via callbacks.</p>
<hr />
<h3 id="step-2-modal-view-and-modal-create">Step 2: Modal View and Modal
Create</h3>
<p>Create a reusable <code>Modal</code> component and use it for viewing
and creating tasks.</p>
<ul>
<li><strong>Create Modal Component</strong>: <code>tsx</code>typescript
import React from â€˜reactâ€™; import { Dialog } from â€˜<span
class="citation"
data-cites="headlessui/react">@headlessui/react</span>â€™;</li>
</ul>
<p>interface ModalProps { onClose: () =&gt; void; children:
React.ReactNode; }</p>
const Modal: React.FC<ModalProps> = ({ onClose, children }) =&gt; {
return (
<Dialog open={true} onClose={onClose} className="fixed inset-0 z-50 overflow-y-auto">
<div className="flex items-center justify-center min-h-screen">
<pre><code>            &lt;Dialog.Overlay className=&quot;fixed inset-0 bg-black opacity-30&quot; /&gt;
            &lt;div className=&quot;bg-white rounded-lg p-6 max-w-lg w-full mx-4 relative&quot;&gt;
                &lt;button
                    onClick={onClose}
                    className=&quot;absolute top-2 right-2 text-gray-600 hover:text-gray-800&quot;
                    aria-label=&quot;Close modal&quot;
                &gt;
                    âœ•
                &lt;/button&gt;
                {children}
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/Dialog&gt;
);</code></pre>
<p>};</p>
<p>export default Modal;</p>
<pre><code></code></pre>
<ul>
<li><strong>Update Create Component</strong>
(<code>resources/js/Pages/Tasks/Create.tsx</code>): Convert to
TypeScript and adapt for modal use: <code>tsx</code>typescript import
React from â€˜reactâ€™; import { useForm } from â€˜react-hook-formâ€™; import {
yupResolver } from â€˜<span class="citation"
data-cites="hookform/resolvers/yup">@hookform/resolvers/yup</span>â€™;
import * as Yup from â€˜yupâ€™; import { Inertia } from â€˜<span
class="citation"
data-cites="inertiajs/inertia">@inertiajs/inertia</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</li>
</ul>
<p>interface Category { id: number; name: string; }</p>
<p>interface CreateProps { categories: Category[]; onClose: () =&gt;
void; }</p>
<p>const schema = Yup.object().shape({ title:
Yup.string().required(â€˜Title is requiredâ€™).max(255, â€˜Title is too
longâ€™), description: Yup.string().nullable(), category_id:
Yup.number().nullable(), image: Yup.mixed().nullable(), });</p>
<p>interface FormData { title: string; description?: string;
category_id?: number; image?: File; }</p>
<p>const Create: React.FC<CreateProps> = ({ categories, onClose }) =&gt;
{ const { t } = useTranslation(); const { register, handleSubmit,
formState: { errors }, reset } = useForm<FormData>({ resolver:
yupResolver(schema), defaultValues: { title: â€™â€˜, description:â€™â€™,
category_id: undefined }, });</p>
<pre><code>const onSubmit = (data: FormData) =&gt; {
    const formData = new FormData();
    formData.append(&#39;title&#39;, data.title);
    if (data.description) formData.append(&#39;description&#39;, data.description);
    if (data.category_id) formData.append(&#39;category_id&#39;, data.category_id.toString());
    if (data.image) formData.append(&#39;image&#39;, data.image);

    Inertia.post(&#39;/tasks&#39;, formData, {
        onSuccess: () =&gt; {
            reset();
            onClose();
        },
    });
};

return (
    &lt;form onSubmit={handleSubmit(onSubmit)} aria-label={t(&#39;Create new task form&#39;)}&gt;
        &lt;h2 className=&quot;text-xl font-bold mb-4&quot;&gt;{t(&#39;Create Task&#39;)}&lt;/h2&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;title&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Title&#39;)}&lt;/label&gt;
            &lt;input
                id=&quot;title&quot;
                {...register(&#39;title&#39;)}
                className=&quot;border p-2 w-full&quot;
                aria-required=&quot;true&quot;
            /&gt;
            {errors.title &amp;&amp; &lt;p className=&quot;text-red-600&quot; role=&quot;alert&quot;&gt;{errors.title.message}&lt;/p&gt;}
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;description&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Description&#39;)}&lt;/label&gt;
            &lt;textarea
                id=&quot;description&quot;
                {...register(&#39;description&#39;)}
                className=&quot;border p-2 w-full&quot;
            /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;category_id&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Category&#39;)}&lt;/label&gt;
            &lt;select
                id=&quot;category_id&quot;
                {...register(&#39;category_id&#39;)}
                className=&quot;border p-2 w-full&quot;
            &gt;
                &lt;option value=&quot;&quot;&gt;{t(&#39;Select a category&#39;)}&lt;/option&gt;
                {categories.map((category) =&gt; (
                    &lt;option key={category.id} value={category.id}&gt;
                        {category.name}
                    &lt;/option&gt;
                ))}
            &lt;/select&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;image&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Image&#39;)}&lt;/label&gt;
            &lt;input
                id=&quot;image&quot;
                type=&quot;file&quot;
                {...register(&#39;image&#39;)}
                className=&quot;border p-2 w-full&quot;
                accept=&quot;image/*&quot;
            /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex space-x-2&quot;&gt;
            &lt;button type=&quot;submit&quot; className=&quot;bg-blue-500 text-white p-2&quot;&gt;{t(&#39;Create&#39;)}&lt;/button&gt;
            &lt;button
                type=&quot;button&quot;
                onClick={onClose}
                className=&quot;bg-gray-200 p-2&quot;
                aria-label=&quot;Cancel&quot;
            &gt;
                {t(&#39;Cancel&#39;)}
            &lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
);</code></pre>
<p>};</p>
<p>export default Create;</p>
<pre><code></code></pre>
<p><strong>Explanation</strong>: The <code>Modal</code> component uses
<code>@headlessui/react</code> for accessible dialogs. The
<code>Create</code> component is now used within a modal, triggered from
<code>Index.tsx</code>. The view modal displays task details, including
images.</p>
<hr />
<h3 id="step-3-image-upload">Step 3: Image Upload</h3>
<p>Handle image uploads in Laravel and display them in the app.</p>
<ul>
<li><p><strong>Configure Filesystem</strong>: Update
<code>config/filesystems.php</code>:</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;disks&#39;</span> =&gt; [</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;public&#39;</span> =&gt; [</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;driver&#39;</span> =&gt; <span class="st">&#39;local&#39;</span><span class="ot">,</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;root&#39;</span> =&gt; storage_path(<span class="st">&#39;app/public&#39;</span>)<span class="ot">,</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;url&#39;</span> =&gt; env(<span class="st">&#39;APP_URL&#39;</span>)<span class="op">.</span><span class="st">&#39;/storage&#39;</span><span class="ot">,</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;visibility&#39;</span> =&gt; <span class="st">&#39;public&#39;</span><span class="ot">,</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    ]<span class="ot">,</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>]<span class="ot">,</span></span></code></pre></div>
<p>Run:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan storage:link</span></code></pre></div></li>
<li><p><strong>Update TaskController</strong> (<code>store</code> and
<code>update</code> methods):</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="cn">I</span>ntervention\<span class="cn">I</span>mage\<span class="cn">F</span>acades\<span class="cn">I</span>mage<span class="ot">;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> store(<span class="cn">R</span>equest <span class="va">$request</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">$validated</span> <span class="op">=</span> <span class="va">$request</span>-&gt;validate([</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;title&#39;</span> =&gt; <span class="st">&#39;required|string|max:255&#39;</span><span class="ot">,</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;description&#39;</span> =&gt; <span class="st">&#39;nullable|string&#39;</span><span class="ot">,</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;category_id&#39;</span> =&gt; <span class="st">&#39;nullable|exists:categories,id&#39;</span><span class="ot">,</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;image&#39;</span> =&gt; <span class="st">&#39;nullable|image|max:2048&#39;</span><span class="ot">,</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="va">$request</span>-&gt;hasFile(<span class="st">&#39;image&#39;</span>)) {</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">$image</span> <span class="op">=</span> <span class="va">$request</span>-&gt;<span class="fu">file</span>(<span class="st">&#39;image&#39;</span>)<span class="ot">;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">$filename</span> <span class="op">=</span> <span class="fu">time</span>() <span class="op">.</span> <span class="st">&#39;.&#39;</span> <span class="op">.</span> <span class="va">$image</span>-&gt;getClientOriginalExtension()<span class="ot">;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>        <span class="cn">I</span>mage::make(<span class="va">$image</span>)-&gt;resize(<span class="dv">300</span><span class="ot">,</span> <span class="kw">null</span><span class="ot">,</span> <span class="kw">function</span> (<span class="va">$constraint</span>) {</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>            <span class="va">$constraint</span>-&gt;aspectRatio()<span class="ot">;</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>        })-&gt;save(storage_path(<span class="st">&#39;app/public/&#39;</span> <span class="op">.</span> <span class="va">$filename</span>))<span class="ot">;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>        <span class="va">$validated</span>[<span class="st">&#39;image&#39;</span>] <span class="op">=</span> <span class="st">&#39;/storage/&#39;</span> <span class="op">.</span> <span class="va">$filename</span><span class="ot">;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="va">$task</span> <span class="op">=</span> <span class="cn">T</span>ask::create(<span class="va">$validated</span> <span class="op">+</span> [<span class="st">&#39;user_id&#39;</span> =&gt; auth()-&gt;id()])<span class="ot">;</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    event(<span class="kw">new</span> \<span class="cn">A</span>pp\<span class="cn">E</span>vents\<span class="cn">T</span>askCreated(<span class="va">$task</span>))<span class="ot">;</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> redirect()-&gt;route(<span class="st">&#39;tasks.index&#39;</span>)-&gt;with(<span class="st">&#39;message&#39;</span><span class="ot">,</span> <span class="st">&#39;Task created!&#39;</span>)<span class="ot">;</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> update(<span class="cn">R</span>equest <span class="va">$request</span><span class="ot">,</span> <span class="cn">T</span>ask <span class="va">$task</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    <span class="va">$this</span>-&gt;authorize(<span class="st">&#39;update&#39;</span><span class="ot">,</span> <span class="va">$task</span>)<span class="ot">;</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>    <span class="va">$validated</span> <span class="op">=</span> <span class="va">$request</span>-&gt;validate([</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;title&#39;</span> =&gt; <span class="st">&#39;required|string|max:255&#39;</span><span class="ot">,</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;description&#39;</span> =&gt; <span class="st">&#39;nullable|string&#39;</span><span class="ot">,</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;completed&#39;</span> =&gt; <span class="st">&#39;boolean&#39;</span><span class="ot">,</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;category_id&#39;</span> =&gt; <span class="st">&#39;nullable|exists:categories,id&#39;</span><span class="ot">,</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;image&#39;</span> =&gt; <span class="st">&#39;nullable|image|max:2048&#39;</span><span class="ot">,</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="va">$request</span>-&gt;hasFile(<span class="st">&#39;image&#39;</span>)) {</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="va">$task</span>-&gt;image) {</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>            \<span class="cn">S</span>torage::delete(<span class="fu">str_replace</span>(<span class="st">&#39;/storage/&#39;</span><span class="ot">,</span> <span class="st">&#39;public/&#39;</span><span class="ot">,</span> <span class="va">$task</span>-&gt;image))<span class="ot">;</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>        <span class="va">$image</span> <span class="op">=</span> <span class="va">$request</span>-&gt;<span class="fu">file</span>(<span class="st">&#39;image&#39;</span>)<span class="ot">;</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>        <span class="va">$filename</span> <span class="op">=</span> <span class="fu">time</span>() <span class="op">.</span> <span class="st">&#39;.&#39;</span> <span class="op">.</span> <span class="va">$image</span>-&gt;getClientOriginalExtension()<span class="ot">;</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>        <span class="cn">I</span>mage::make(<span class="va">$image</span>)-&gt;resize(<span class="dv">300</span><span class="ot">,</span> <span class="kw">null</span><span class="ot">,</span> <span class="kw">function</span> (<span class="va">$constraint</span>) {</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>            <span class="va">$constraint</span>-&gt;aspectRatio()<span class="ot">;</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>        })-&gt;save(storage_path(<span class="st">&#39;app/public/&#39;</span> <span class="op">.</span> <span class="va">$filename</span>))<span class="ot">;</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>        <span class="va">$validated</span>[<span class="st">&#39;image&#39;</span>] <span class="op">=</span> <span class="st">&#39;/storage/&#39;</span> <span class="op">.</span> <span class="va">$filename</span><span class="ot">;</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>    <span class="va">$task</span>-&gt;update(<span class="va">$validated</span>)<span class="ot">;</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> redirect()-&gt;route(<span class="st">&#39;tasks.index&#39;</span>)-&gt;with(<span class="st">&#39;message&#39;</span><span class="ot">,</span> <span class="st">&#39;Task updated!&#39;</span>)<span class="ot">;</span></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>Update Edit Component</strong>
(<code>resources/js/Pages/Tasks/EditComponent.tsx</code>):
<code>tsx</code>typescript import React from â€˜reactâ€™; import { useForm }
from â€˜react-hook-formâ€™; import { yupResolver } from â€˜<span
class="citation"
data-cites="hookform/resolvers/yup">@hookform/resolvers/yup</span>â€™;
import * as Yup from â€˜yupâ€™; import { Inertia } from â€˜<span
class="citation"
data-cites="inertiajs/inertia">@inertiajs/inertia</span>â€™; import { Link
} from â€˜<span class="citation"
data-cites="inertiajs/react">@inertiajs/react</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</p></li>
</ul>
<p>interface Category { id: number; name: string; }</p>
<p>interface Task { id: number; title: string; description: string |
null; completed: boolean; category_id: number | null; image: string |
null; }</p>
<p>interface EditProps { task: Task; categories: Category[]; }</p>
<p>const schema = Yup.object().shape({ title:
Yup.string().required(â€˜Title is requiredâ€™).max(255, â€˜Title is too
longâ€™), description: Yup.string().nullable(), completed: Yup.boolean(),
category_id: Yup.number().nullable(), image: Yup.mixed().nullable(),
});</p>
<p>interface FormData { title: string; description?: string; completed:
boolean; category_id?: number; image?: File; }</p>
<p>const Edit: React.FC<EditProps> = ({ task, categories }) =&gt; {
const { t } = useTranslation(); const { register, handleSubmit,
formState: { errors } } = useForm<FormData>({ resolver:
yupResolver(schema), defaultValues: { title: task.title, description:
task.description || â€™â€™, completed: task.completed, category_id:
task.category_id || undefined, }, });</p>
<pre><code>const onSubmit = (data: FormData) =&gt; {
    const formData = new FormData();
    formData.append(&#39;title&#39;, data.title);
    if (data.description) formData.append(&#39;description&#39;, data.description);
    formData.append(&#39;completed&#39;, data.completed ? &#39;1&#39; : &#39;0&#39;);
    if (data.category_id) formData.append(&#39;category_id&#39;, data.category_id.toString());
    if (data.image) formData.append(&#39;image&#39;, data.image);

    Inertia.post(`/tasks/${task.id}`, formData, {
        headers: { &#39;Content-Type&#39;: &#39;multipart/form-data&#39; },
    });
};

return (
    &lt;div className=&quot;max-w-2xl mx-auto p-4&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold&quot;&gt;{t(&#39;Edit Task&#39;)}&lt;/h1&gt;
        &lt;form onSubmit={handleSubmit(onSubmit)} aria-label={t(&#39;Edit task form&#39;)}&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;title&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Title&#39;)}&lt;/label&gt;
                &lt;input
                    id=&quot;title&quot;
                    {...register(&#39;title&#39;)}
                    className=&quot;border p-2 w-full&quot;
                    aria-required=&quot;true&quot;
                /&gt;
                {errors.title &amp;&amp; &lt;p className=&quot;text-red-600&quot; role=&quot;alert&quot;&gt;{errors.title.message}&lt;/p&gt;}
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;description&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Description&#39;)}&lt;/label&gt;
                &lt;textarea
                    id=&quot;description&quot;
                    {...register(&#39;description&#39;)}
                    className=&quot;border p-2 w-full&quot;
                /&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;category_id&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Category&#39;)}&lt;/label&gt;
                &lt;select
                    id=&quot;category_id&quot;
                    {...register(&#39;category_id&#39;)}
                    className=&quot;border p-2 w-full&quot;
                &gt;
                    &lt;option value=&quot;&quot;&gt;{t(&#39;Select a category&#39;)}&lt;/option&gt;
                    {categories.map((category) =&gt; (
                        &lt;option key={category.id} value={category.id}&gt;
                            {category.name}
                        &lt;/option&gt;
                    ))}
                &lt;/select&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;completed&quot; className=&quot;block text-gray-700&quot;&gt;
                    &lt;input id=&quot;completed&quot; type=&quot;checkbox&quot; {...register(&#39;completed&#39;)} /&gt;
                    {t(&#39;Completed&#39;)}
                &lt;/label&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;image&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Image&#39;)}&lt;/label&gt;
                &lt;input
                    id=&quot;image&quot;
                    type=&quot;file&quot;
                    {...register(&#39;image&#39;)}
                    className=&quot;border p-2 w-full&quot;
                    accept=&quot;image/*&quot;
                /&gt;
                {task.image &amp;&amp; &lt;img src={task.image} alt={task.title} className=&quot;max-w-xs mt-2&quot; /&gt;}
            &lt;/div&gt;
            &lt;div className=&quot;flex space-x-2&quot;&gt;
                &lt;button type=&quot;submit&quot; className=&quot;bg-blue-500 text-white p-2&quot;&gt;{t(&#39;Update&#39;)}&lt;/button&gt;
                &lt;Link href=&quot;/tasks&quot; className=&quot;text-blue-600 hover:underline&quot;&gt;
                    {t(&#39;Cancel&#39;)}
                &lt;/Link&gt;
            &lt;/div&gt;
        &lt;/form&gt;
    &lt;/div&gt;
);</code></pre>
<p>};</p>
<p>export default Edit;</p>
<pre><code></code></pre>
<p><strong>Explanation</strong>: Image uploads are handled using
<code>FormData</code> and processed with Intervention Image in Laravel,
resizing images for efficiency.</p>
<hr />
<h3 id="step-4-dependent-dropdown">Step 4: Dependent Dropdown</h3>
<p>Add subcategories that depend on the selected category.</p>
<ul>
<li><p><strong>Create Subcategory Model</strong>:</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan make:model Subcategory <span class="at">-m</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cn">S</span>chema::create(<span class="st">&#39;subcategories&#39;</span><span class="ot">,</span> <span class="kw">function</span> (<span class="cn">B</span>lueprint <span class="va">$table</span>) {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">$table</span>-&gt;id()<span class="ot">;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">$table</span>-&gt;<span class="dt">string</span>(<span class="st">&#39;name&#39;</span>)<span class="ot">;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">$table</span>-&gt;foreignId(<span class="st">&#39;category_id&#39;</span>)-&gt;constrained()-&gt;onDelete(<span class="st">&#39;cascade&#39;</span>)<span class="ot">;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">$table</span>-&gt;timestamps()<span class="ot">;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>})<span class="ot">;</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan migrate</span></code></pre></div></li>
<li><p><strong>Update Task Model</strong>: Add
<code>subcategory_id</code>:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan make:migration add_subcategory_id_to_tasks</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cn">S</span>chema::table(<span class="st">&#39;tasks&#39;</span><span class="ot">,</span> <span class="kw">function</span> (<span class="cn">B</span>lueprint <span class="va">$table</span>) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">$table</span>-&gt;foreignId(<span class="st">&#39;subcategory_id&#39;</span>)-&gt;nullable()-&gt;constrained()-&gt;onDelete(<span class="st">&#39;set null&#39;</span>)<span class="ot">;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>})<span class="ot">;</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan migrate</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> <span class="cn">A</span>pp\<span class="cn">M</span>odels<span class="ot">;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="cn">T</span>ask <span class="kw">extends</span> <span class="cn">M</span>odel</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="va">$fillable</span> <span class="op">=</span> [<span class="st">&#39;title&#39;</span><span class="ot">,</span> <span class="st">&#39;description&#39;</span><span class="ot">,</span> <span class="st">&#39;completed&#39;</span><span class="ot">,</span> <span class="st">&#39;category_id&#39;</span><span class="ot">,</span> <span class="st">&#39;subcategory_id&#39;</span><span class="ot">,</span> <span class="st">&#39;user_id&#39;</span><span class="ot">,</span> <span class="st">&#39;image&#39;</span><span class="ot">,</span> <span class="st">&#39;order&#39;</span>]<span class="ot">;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">function</span> category()</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">$this</span>-&gt;belongsTo(<span class="cn">C</span>ategory::<span class="kw">class</span>)<span class="ot">;</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">function</span> subcategory()</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">$this</span>-&gt;belongsTo(<span class="cn">S</span>ubcategory::<span class="kw">class</span>)<span class="ot">;</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">function</span> user()</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">$this</span>-&gt;belongsTo(<span class="cn">U</span>ser::<span class="kw">class</span>)<span class="ot">;</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>Seed Subcategories</strong>:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan make:seeder SubcategorySeeder</span></code></pre></div>
<div class="sourceCode" id="cb30"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">namespace</span> <span class="cn">D</span>atabase\<span class="cn">S</span>eeders<span class="ot">;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="cn">A</span>pp\<span class="cn">M</span>odels\<span class="cn">C</span>ategory<span class="ot">;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="cn">A</span>pp\<span class="cn">M</span>odels\<span class="cn">S</span>ubcategory<span class="ot">;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="cn">I</span>lluminate\<span class="cn">D</span>atabase\<span class="cn">S</span>eeder<span class="ot">;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="cn">S</span>ubcategorySeeder <span class="kw">extends</span> <span class="cn">S</span>eeder</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="kw">function</span> run()</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">$work</span> <span class="op">=</span> <span class="cn">C</span>ategory::where(<span class="st">&#39;name&#39;</span><span class="ot">,</span> <span class="st">&#39;Work&#39;</span>)-&gt;first()<span class="ot">;</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">$personal</span> <span class="op">=</span> <span class="cn">C</span>ategory::where(<span class="st">&#39;name&#39;</span><span class="ot">,</span> <span class="st">&#39;Personal&#39;</span>)-&gt;first()<span class="ot">;</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>        <span class="cn">S</span>ubcategory::create([<span class="st">&#39;name&#39;</span> =&gt; <span class="st">&#39;Meeting&#39;</span><span class="ot">,</span> <span class="st">&#39;category_id&#39;</span> =&gt; <span class="va">$work</span>-&gt;id])<span class="ot">;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        <span class="cn">S</span>ubcategory::create([<span class="st">&#39;name&#39;</span> =&gt; <span class="st">&#39;Project&#39;</span><span class="ot">,</span> <span class="st">&#39;category_id&#39;</span> =&gt; <span class="va">$work</span>-&gt;id])<span class="ot">;</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>        <span class="cn">S</span>ubcategory::create([<span class="st">&#39;name&#39;</span> =&gt; <span class="st">&#39;Hobby&#39;</span><span class="ot">,</span> <span class="st">&#39;category_id&#39;</span> =&gt; <span class="va">$personal</span>-&gt;id])<span class="ot">;</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>        <span class="cn">S</span>ubcategory::create([<span class="st">&#39;name&#39;</span> =&gt; <span class="st">&#39;Family&#39;</span><span class="ot">,</span> <span class="st">&#39;category_id&#39;</span> =&gt; <span class="va">$personal</span>-&gt;id])<span class="ot">;</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan db:seed <span class="at">--class</span><span class="op">=</span>SubcategorySeeder</span></code></pre></div></li>
<li><p><strong>Update TaskController</strong>: Include subcategories in
<code>create</code> and <code>edit</code>:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode php"><code class="sourceCode php"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> create()</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">$categories</span> <span class="op">=</span> <span class="cn">C</span>ategory::with(<span class="st">&#39;subcategories&#39;</span>)-&gt;get()<span class="ot">;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="cn">I</span>nertia::render(<span class="st">&#39;Tasks/Create&#39;</span><span class="ot">,</span> [<span class="st">&#39;categories&#39;</span> =&gt; <span class="va">$categories</span>])<span class="ot">;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> edit(<span class="cn">T</span>ask <span class="va">$task</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">$this</span>-&gt;authorize(<span class="st">&#39;update&#39;</span><span class="ot">,</span> <span class="va">$task</span>)<span class="ot">;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">$categories</span> <span class="op">=</span> <span class="cn">C</span>ategory::with(<span class="st">&#39;subcategories&#39;</span>)-&gt;get()<span class="ot">;</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="cn">I</span>nertia::render(<span class="st">&#39;Tasks/Edit&#39;</span><span class="ot">,</span> [</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;task&#39;</span> =&gt; <span class="va">$task</span><span class="ot">,</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;categories&#39;</span> =&gt; <span class="va">$categories</span><span class="ot">,</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> store(<span class="cn">R</span>equest <span class="va">$request</span>)</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="va">$validated</span> <span class="op">=</span> <span class="va">$request</span>-&gt;validate([</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;title&#39;</span> =&gt; <span class="st">&#39;required|string|max:255&#39;</span><span class="ot">,</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;description&#39;</span> =&gt; <span class="st">&#39;nullable|string&#39;</span><span class="ot">,</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;category_id&#39;</span> =&gt; <span class="st">&#39;nullable|exists:categories,id&#39;</span><span class="ot">,</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;subcategory_id&#39;</span> =&gt; <span class="st">&#39;nullable|exists:subcategories,id&#39;</span><span class="ot">,</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;image&#39;</span> =&gt; <span class="st">&#39;nullable|image|max:2048&#39;</span><span class="ot">,</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="va">$request</span>-&gt;hasFile(<span class="st">&#39;image&#39;</span>)) {</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>        <span class="va">$image</span> <span class="op">=</span> <span class="va">$request</span>-&gt;<span class="fu">file</span>(<span class="st">&#39;image&#39;</span>)<span class="ot">;</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>        <span class="va">$filename</span> <span class="op">=</span> <span class="fu">time</span>() <span class="op">.</span> <span class="st">&#39;.&#39;</span> <span class="op">.</span> <span class="va">$image</span>-&gt;getClientOriginalExtension()<span class="ot">;</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>        <span class="cn">I</span>mage::make(<span class="va">$image</span>)-&gt;resize(<span class="dv">300</span><span class="ot">,</span> <span class="kw">null</span><span class="ot">,</span> <span class="kw">function</span> (<span class="va">$constraint</span>) {</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>            <span class="va">$constraint</span>-&gt;aspectRatio()<span class="ot">;</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>        })-&gt;save(storage_path(<span class="st">&#39;app/public/&#39;</span> <span class="op">.</span> <span class="va">$filename</span>))<span class="ot">;</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>        <span class="va">$validated</span>[<span class="st">&#39;image&#39;</span>] <span class="op">=</span> <span class="st">&#39;/storage/&#39;</span> <span class="op">.</span> <span class="va">$filename</span><span class="ot">;</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>    <span class="va">$task</span> <span class="op">=</span> <span class="cn">T</span>ask::create(<span class="va">$validated</span> <span class="op">+</span> [<span class="st">&#39;user_id&#39;</span> =&gt; auth()-&gt;id()])<span class="ot">;</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>    event(<span class="kw">new</span> \<span class="cn">A</span>pp\<span class="cn">E</span>vents\<span class="cn">T</span>askCreated(<span class="va">$task</span>))<span class="ot">;</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> redirect()-&gt;route(<span class="st">&#39;tasks.index&#39;</span>)-&gt;with(<span class="st">&#39;message&#39;</span><span class="ot">,</span> <span class="st">&#39;Task created!&#39;</span>)<span class="ot">;</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">function</span> update(<span class="cn">R</span>equest <span class="va">$request</span><span class="ot">,</span> <span class="cn">T</span>ask <span class="va">$task</span>)</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>    <span class="va">$this</span>-&gt;authorize(<span class="st">&#39;update&#39;</span><span class="ot">,</span> <span class="va">$task</span>)<span class="ot">;</span></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>    <span class="va">$validated</span> <span class="op">=</span> <span class="va">$request</span>-&gt;validate([</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;title&#39;</span> =&gt; <span class="st">&#39;required|string|max:255&#39;</span><span class="ot">,</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;description&#39;</span> =&gt; <span class="st">&#39;nullable|string&#39;</span><span class="ot">,</span></span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;completed&#39;</span> =&gt; <span class="st">&#39;boolean&#39;</span><span class="ot">,</span></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;category_id&#39;</span> =&gt; <span class="st">&#39;nullable|exists:categories,id&#39;</span><span class="ot">,</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;subcategory_id&#39;</span> =&gt; <span class="st">&#39;nullable|exists:subcategories,id&#39;</span><span class="ot">,</span></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;image&#39;</span> =&gt; <span class="st">&#39;nullable|image|max:2048&#39;</span><span class="ot">,</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>    ])<span class="ot">;</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="va">$request</span>-&gt;hasFile(<span class="st">&#39;image&#39;</span>)) {</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="va">$task</span>-&gt;image) {</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>            \<span class="cn">S</span>torage::delete(<span class="fu">str_replace</span>(<span class="st">&#39;/storage/&#39;</span><span class="ot">,</span> <span class="st">&#39;public/&#39;</span><span class="ot">,</span> <span class="va">$task</span>-&gt;image))<span class="ot">;</span></span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>        <span class="va">$image</span> <span class="op">=</span> <span class="va">$request</span>-&gt;<span class="fu">file</span>(<span class="st">&#39;image&#39;</span>)<span class="ot">;</span></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>        <span class="va">$filename</span> <span class="op">=</span> <span class="fu">time</span>() <span class="op">.</span> <span class="st">&#39;.&#39;</span> <span class="op">.</span> <span class="va">$image</span>-&gt;getClientOriginalExtension()<span class="ot">;</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>        <span class="cn">I</span>mage::make(<span class="va">$image</span>)-&gt;resize(<span class="dv">300</span><span class="ot">,</span> <span class="kw">null</span><span class="ot">,</span> <span class="kw">function</span> (<span class="va">$constraint</span>) {</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>            <span class="va">$constraint</span>-&gt;aspectRatio()<span class="ot">;</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>        })-&gt;save(storage_path(<span class="st">&#39;app/public/&#39;</span> <span class="op">.</span> <span class="va">$filename</span>))<span class="ot">;</span></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>        <span class="va">$validated</span>[<span class="st">&#39;image&#39;</span>] <span class="op">=</span> <span class="st">&#39;/storage/&#39;</span> <span class="op">.</span> <span class="va">$filename</span><span class="ot">;</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>    <span class="va">$task</span>-&gt;update(<span class="va">$validated</span>)<span class="ot">;</span></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> redirect()-&gt;route(<span class="st">&#39;tasks.index&#39;</span>)-&gt;with(<span class="st">&#39;message&#39;</span><span class="ot">,</span> <span class="st">&#39;Task updated!&#39;</span>)<span class="ot">;</span></span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p><strong>Update Create Component</strong>
(<code>Create.tsx</code>): <code>tsx</code>typescript import React, {
useState } from â€˜reactâ€™; import { useForm } from â€˜react-hook-formâ€™;
import { yupResolver } from â€˜<span class="citation"
data-cites="hookform/resolvers/yup">@hookform/resolvers/yup</span>â€™;
import * as Yup from â€˜yupâ€™; import { Inertia } from â€˜<span
class="citation"
data-cites="inertiajs/inertia">@inertiajs/inertia</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</p></li>
</ul>
<p>interface Subcategory { id: number; name: string; category_id:
number; }</p>
<p>interface Category { id: number; name: string; subcategories:
Subcategory[]; }</p>
<p>interface CreateProps { categories: Category[]; onClose: () =&gt;
void; }</p>
<p>const schema = Yup.object().shape({ title:
Yup.string().required(â€˜Title is requiredâ€™).max(255, â€˜Title is too
longâ€™), description: Yup.string().nullable(), category_id:
Yup.number().nullable(), subcategory_id: Yup.number().nullable(), image:
Yup.mixed().nullable(), });</p>
<p>interface FormData { title: string; description?: string;
category_id?: number; subcategory_id?: number; image?: File; }</p>
<p>const Create: React.FC<CreateProps> = ({ categories, onClose }) =&gt;
{ const { t } = useTranslation(); const { register, handleSubmit,
formState: { errors }, reset, watch } = useForm<FormData>({ resolver:
yupResolver(schema), defaultValues: { title: â€™â€˜, description:â€™â€˜,
category_id: undefined, subcategory_id: undefined }, }); const
categoryId = watch(â€™category_idâ€™); const subcategories =
categories.find((cat) =&gt; cat.id === categoryId)?.subcategories ||
[];</p>
<pre><code>const onSubmit = (data: FormData) =&gt; {
    const formData = new FormData();
    formData.append(&#39;title&#39;, data.title);
    if (data.description) formData.append(&#39;description&#39;, data.description);
    if (data.category_id) formData.append(&#39;category_id&#39;, data.category_id.toString());
    if (data.subcategory_id) formData.append(&#39;subcategory_id&#39;, data.subcategory_id.toString());
    if (data.image) formData.append(&#39;image&#39;, data.image);

    Inertia.post(&#39;/tasks&#39;, formData, {
        onSuccess: () =&gt; {
            reset();
            onClose();
        },
    });
};

return (
    &lt;form onSubmit={handleSubmit(onSubmit)} aria-label={t(&#39;Create new task form&#39;)}&gt;
        &lt;h2 className=&quot;text-xl font-bold mb-4&quot;&gt;{t(&#39;Create Task&#39;)}&lt;/h2&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;title&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Title&#39;)}&lt;/label&gt;
            &lt;input
                id=&quot;title&quot;
                {...register(&#39;title&#39;)}
                className=&quot;border p-2 w-full&quot;
                aria-required=&quot;true&quot;
            /&gt;
            {errors.title &amp;&amp; &lt;p className=&quot;text-red-600&quot; role=&quot;alert&quot;&gt;{errors.title.message}&lt;/p&gt;}
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;description&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Description&#39;)}&lt;/label&gt;
            &lt;textarea
                id=&quot;description&quot;
                {...register(&#39;description&#39;)}
                className=&quot;border p-2 w-full&quot;
            /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;category_id&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Category&#39;)}&lt;/label&gt;
            &lt;select
                id=&quot;category_id&quot;
                {...register(&#39;category_id&#39;)}
                className=&quot;border p-2 w-full&quot;
            &gt;
                &lt;option value=&quot;&quot;&gt;{t(&#39;Select a category&#39;)}&lt;/option&gt;
                {categories.map((category) =&gt; (
                    &lt;option key={category.id} value={category.id}&gt;
                        {category.name}
                    &lt;/option&gt;
                ))}
            &lt;/select&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;subcategory_id&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Subcategory&#39;)}&lt;/label&gt;
            &lt;select
                id=&quot;subcategory_id&quot;
                {...register(&#39;subcategory_id&#39;)}
                className=&quot;border p-2 w-full&quot;
                disabled={!categoryId}
            &gt;
                &lt;option value=&quot;&quot;&gt;{t(&#39;Select a subcategory&#39;)}&lt;/option&gt;
                {subcategories.map((subcategory) =&gt; (
                    &lt;option key={subcategory.id} value={subcategory.id}&gt;
                        {subcategory.name}
                    &lt;/option&gt;
                ))}
            &lt;/select&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-4&quot;&gt;
            &lt;label htmlFor=&quot;image&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Image&#39;)}&lt;/label&gt;
            &lt;input
                id=&quot;image&quot;
                type=&quot;file&quot;
                {...register(&#39;image&#39;)}
                className=&quot;border p-2 w-full&quot;
                accept=&quot;image/*&quot;
            /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;flex space-x-2&quot;&gt;
            &lt;button type=&quot;submit&quot; className=&quot;bg-blue-500 text-white p-2&quot;&gt;{t(&#39;Create&#39;)}&lt;/button&gt;
            &lt;button
                type=&quot;button&quot;
                onClick={onClose}
                className=&quot;bg-gray-200 p-2&quot;
                aria-label=&quot;Cancel&quot;
            &gt;
                {t(&#39;Cancel&#39;)}
            &lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
);</code></pre>
<p>};</p>
<p>export default Create;</p>
<pre><code></code></pre>
<ul>
<li><strong>Update Edit Component</strong>
(<code>EditComponent.tsx</code>): <code>tsx</code>typescript import
React, { useState } from â€˜reactâ€™; import { useForm } from
â€˜react-hook-formâ€™; import { yupResolver } from â€˜<span class="citation"
data-cites="hookform/resolvers/yup">@hookform/resolvers/yup</span>â€™;
import * as Yup from â€˜yupâ€™; import { Inertia } from â€˜<span
class="citation"
data-cites="inertiajs/inertia">@inertiajs/inertia</span>â€™; import { Link
} from â€˜<span class="citation"
data-cites="inertiajs/react">@inertiajs/react</span>â€™; import {
useTranslation } from â€˜react-i18nextâ€™;</li>
</ul>
<p>interface Subcategory { id: number; name: string; category_id:
number; }</p>
<p>interface Category { id: number; name: string; subcategories:
Subcategory[]; }</p>
<p>interface Task { id: number; title: string; description: string |
null; completed: boolean; category_id: number | null; subcategory_id:
number | null; image: string | null; }</p>
<p>interface EditProps { task: Task; categories: Category[]; }</p>
<p>const schema = Yup.object().shape({ title:
Yup.string().required(â€˜Title is requiredâ€™).max(255, â€˜Title is too
longâ€™), description: Yup.string().nullable(), completed: Yup.boolean(),
category_id: Yup.number().nullable(), subcategory_id:
Yup.number().nullable(), image: Yup.mixed().nullable(), });</p>
<p>interface FormData { title: string; description?: string; completed:
boolean; category_id?: number; subcategory_id?: number; image?: File;
}</p>
<p>const Edit: React.FC<EditProps> = ({ task, categories }) =&gt; {
const { t } = useTranslation(); const { register, handleSubmit,
formState: { errors }, watch } = useForm<FormData>({ resolver:
yupResolver(schema), defaultValues: { title: task.title, description:
task.description || â€™â€˜, completed: task.completed, category_id:
task.category_id || undefined, subcategory_id: task.subcategory_id ||
undefined, }, }); const categoryId = watch(â€™category_idâ€™); const
subcategories = categories.find((cat) =&gt; cat.id ===
categoryId)?.subcategories || [];</p>
<pre><code>const onSubmit = (data: FormData) =&gt; {
    const formData = new FormData();
    formData.append(&#39;title&#39;, data.title);
    if (data.description) formData.append(&#39;description&#39;, data.description);
    formData.append(&#39;completed&#39;, data.completed ? &#39;1&#39; : &#39;0&#39;);
    if (data.category_id) formData.append(&#39;category_id&#39;, data.category_id.toString());
    if (data.subcategory_id) formData.append(&#39;subcategory_id&#39;, data.subcategory_id.toString());
    if (data.image) formData.append(&#39;image&#39;, data.image);

    Inertia.post(`/tasks/${task.id}`, formData, {
        headers: { &#39;Content-Type&#39;: &#39;multipart/form-data&#39; },
    });
};

return (
    &lt;div className=&quot;max-w-2xl mx-auto p-4&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold&quot;&gt;{t(&#39;Edit Task&#39;)}&lt;/h1&gt;
        &lt;form onSubmit={handleSubmit(onSubmit)} aria-label={t(&#39;Edit task form&#39;)}&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;title&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Title&#39;)}&lt;/label&gt;
                &lt;input
                    id=&quot;title&quot;
                    {...register(&#39;title&#39;)}
                    className=&quot;border p-2 w-full&quot;
                    aria-required=&quot;true&quot;
                /&gt;
                {errors.title &amp;&amp; &lt;p className=&quot;text-red-600&quot; role=&quot;alert&quot;&gt;{errors.title.message}&lt;/p&gt;}
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;description&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Description&#39;)}&lt;/label&gt;
                &lt;textarea
                    id=&quot;description&quot;
                    {...register(&#39;description&#39;)}
                    className=&quot;border p-2 w-full&quot;
                /&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;category_id&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Category&#39;)}&lt;/label&gt;
                &lt;select
                    id=&quot;category_id&quot;
                    {...register(&#39;category_id&#39;)}
                    className=&quot;border p-2 w-full&quot;
                &gt;
                    &lt;option value=&quot;&quot;&gt;{t(&#39;Select a category&#39;)}&lt;/option&gt;
                    {categories.map((category) =&gt; (
                        &lt;option key={category.id} value={category.id}&gt;
                            {category.name}
                        &lt;/option&gt;
                    ))}
                &lt;/select&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;subcategory_id&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Subcategory&#39;)}&lt;/label&gt;
                &lt;select
                    id=&quot;subcategory_id&quot;
                    {...register(&#39;subcategory_id&#39;)}
                    className=&quot;border p-2 w-full&quot;
                    disabled={!categoryId}
                &gt;
                    &lt;option value=&quot;&quot;&gt;{t(&#39;Select a subcategory&#39;)}&lt;/option&gt;
                    {subcategories.map((subcategory) =&gt; (
                        &lt;option key={subcategory.id} value={subcategory.id}&gt;
                            {subcategory.name}
                        &lt;/option&gt;
                    ))}
                &lt;/select&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;completed&quot; className=&quot;block text-gray-700&quot;&gt;
                    &lt;input id=&quot;completed&quot; type=&quot;checkbox&quot; {...register(&#39;completed&#39;)} /&gt;
                    {t(&#39;Completed&#39;)}
                &lt;/label&gt;
            &lt;/div&gt;
            &lt;div className=&quot;mb-4&quot;&gt;
                &lt;label htmlFor=&quot;image&quot; className=&quot;block text-gray-700&quot;&gt;{t(&#39;Image&#39;)}&lt;/label&gt;
                &lt;input
                    id=&quot;image&quot;
                    type=&quot;file&quot;
                    {...register(&#39;image&#39;)}
                    className=&quot;border p-2 w-full&quot;
                    accept=&quot;image/*&quot;
                /&gt;
                {task.image &amp;&amp; &lt;img src={task.image} alt={task.title} className=&quot;max-w-xs mt-2&quot; /&gt;}
            &lt;/div&gt;
            &lt;div className=&quot;flex space-x-2&quot;&gt;
                &lt;button type=&quot;submit&quot; className=&quot;bg-blue-500 text-white p-2&quot;&gt;{t(&#39;Update&#39;)}&lt;/button&gt;
                &lt;Link href=&quot;/tasks&quot; className=&quot;text-blue-600 hover:underline&quot;&gt;
                    {t(&#39;Cancel&#39;)}
                &lt;/Link&gt;
            &lt;/div&gt;
        &lt;/form&gt;
    &lt;/div&gt;
);</code></pre>
<p>};</p>
<p>export default Edit;</p>
<pre><code></code></pre>
<p><strong>Explanation</strong>: The dependent dropdown uses
<code>watch</code> to monitor <code>category_id</code> and dynamically
populate <code>subcategory_id</code> options based on the selected
category.</p>
<hr />
<h3 id="step-5-testing-the-app">Step 5: Testing the App</h3>
<ol type="1">
<li><p><strong>Run Locally</strong>:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">php</span> artisan serve</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code></pre></div></li>
<li><p><strong>Test Features</strong>:</p>
<ul>
<li>Log in and view tasks in the DataTable; test sorting and
filtering.</li>
<li>Click â€œViewâ€ to see task details in a modal.</li>
<li>Click â€œAdd New Taskâ€ to open the create modal, upload an image, and
select category/subcategory.</li>
<li>Edit a task and verify dependent dropdown functionality.</li>
<li>Run tests: <code>npm test</code>.</li>
</ul></li>
<li><p><strong>Verify PWA and i18n</strong>: Switch languages and test
offline mode.</p></li>
</ol>
<hr />
<h3 id="summary">Summary</h3>
<ul>
<li><strong>Advanced DataTable</strong>: Implemented a sortable,
filterable table with <code>react-table</code>.</li>
<li><strong>Modal View/Create</strong>: Created a reusable
<code>Modal</code> component for viewing and creating tasks.</li>
<li><strong>Image Upload</strong>: Added image upload functionality with
server-side processing.</li>
<li><strong>Dependent Dropdown</strong>: Implemented
category/subcategory dropdowns.</li>
<li><strong>Reusable Components</strong>: Built <code>DataTable</code>
and <code>Modal</code> for extensibility, using TypeScript and
accessibility features.</li>
</ul>
<h3 id="next-steps">Next Steps</h3>
<ul>
<li><strong>Push Notifications</strong>: Add push notifications for task
updates using Pusher.</li>
<li><strong>Analytics</strong>: Integrate analytics (e.g., Mixpanel) to
track user interactions.</li>
<li><strong>Export/Import</strong>: Add functionality to export/import
tasks as CSV.</li>
<li><strong>Custom Hooks</strong>: Create more custom hooks for reusable
logic (e.g., data fetching).</li>
</ul>
<p>If you want to focus on one of these (e.g., push notifications or CSV
export), or need debugging help, let me know, and Iâ€™ll provide a
detailed guide with examples!</p>
